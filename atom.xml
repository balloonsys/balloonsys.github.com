<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Balloonsys Inc.]]></title>
  <link href="http://balloonsys.github.io/atom.xml" rel="self"/>
  <link href="http://balloonsys.github.io/"/>
  <updated>2016-09-10T18:52:12+08:00</updated>
  <id>http://balloonsys.github.io/</id>
  <author>
    <name><![CDATA[Linkou Bian]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第十七期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/09/10/tech-notes-17/"/>
    <updated>2016-09-10T17:44:51+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/09/10/tech-notes-17</id>
    <content type="html"><![CDATA[<p>本期周报主要包括 App Store 的最新规则，做一款 App 前需要考虑的方方面面，以及 Surge 开发者分享的他所使用的软硬件工具等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://tech2ipo.com/10032335">iPhone 年年焕新计划</a> By tech2ipo</h4>

<p>北京时间 9 月 8 日凌晨，苹果发布了最新一代的 iPhone 7 和 7P，这次发布会带来的另一个亮点是「年年焕新」计划。本文将帮你核算参与「年年焕新计划」永远用新 iPhone 究竟要多少钱。</p>

<h4>2) <a href="http://www.nytimes.com/2016/09/10/technology/apple-is-said-to-be-rethinking-strategy-on-self-driving-cars.html?_r=0">Apple Is Said to Be Rethinking Strategy on Self-Driving Cars</a> By Daisuke</h4>

<p>据纽约时报的文章称，苹果自动驾驶汽车项目经历了调整，部分业务被撤销、几十名员工被解雇。今年七月开始由 Bob Mansfield 领导后，苹果改变了该项目的关注点，从对汽车设计和生产的强调转向了对自主驾驶汽车底层技术的开发。</p>

<h2>开发</h2>

<h4>1) <a href="https://segmentfault.com/a/1190000006266276">iOS 客户端基于 WebP 的流量优化</a> By Curiousity</h4>

<p>WebP 是一种同时提供了有损压缩与无损压缩的图片文件格式。据说淘宝客户端在两年前就使用了 WebP（主要是 Native 使用），后来 H5 全面使用，WebView的 WebP 采用插件的方式支持。</p>

<h4>2) <a href="http://qiaotongxin.cc/2016/08/22/20160822/">百度外卖 APP 头像动画效果</a> By 乔同新</h4>

<p>对很多人来说，叫外卖就成了习惯。某日，作者发现百度外卖的 APP 波浪效果很是吸引人，遂就思考如何实现这种『浪』的效果。</p>

<h2>工具</h2>

<h4>1) <a href="https://chengwey.com/ios-10-by-tutorials-bi-ji-er/">Xcode 8 Debugging Improvements</a> By chengwey</h4>

<p>Xcode 8 增加了几项功能，让我们调试起来更加得心应手。Xcode 8 提供的调试工具可以标记竞争危害（Race Conditions）、内存泄露、以及运行时的布局约束问题。</p>

<h4>2) <a href="https://medium.com/ios-os-x-development/my-ios-development-toolkit-2016-ba7601b68085#.pebx7hm9c">My iOS Development Toolkit 2016</a> By Sebastian</h4>

<p>作者分享了他在用的 iOS 开发工具、Web 服务、框架，以及经常浏览的技术博客等。</p>

<h2>其他</h2>

<h4>1) <a href="http://tech.glowing.com/cn/tan-tan-yi-dong-ying-yong-de-an-quan-xing-shi-jian/">移动应用的安全性实践</a> By Glow</h4>

<p>本文将从用户注册流程出发，逐步介绍 Glow 在提高数据安全性方面采用的一些策略方法，供读者参考。</p>

<h4>2) <a href="https://medium.com/the-year-of-the-looking-glass/how-to-do-a-product-critique-98b657050638">How to do a Product Critique</a></h4>

<p>这是 Facebook 产品设计总监的文章，通过对于评价产品的每个步骤的介绍，帮助产品经理更好的理解用户，提升自己的产品直觉。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第十六期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/09/03/tech-notes-16/"/>
    <updated>2016-09-03T10:08:14+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/09/03/tech-notes-16</id>
    <content type="html"><![CDATA[<p>本期周报主要包括 App Store 的最新规则，做一款 App 前需要考虑的方方面面，以及 Surge 开发者分享的他所使用的软硬件工具等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://tech2ipo.com/10032212">苹果对 App Store 进行大清理</a> By tech2ipo</h4>

<p>9月2日凌晨，收到 Apple 的邮件说将下架不能与 iPhone 和 iPad 兼容及不能正常运行的应用，或者没有遵循更新后 App Store 指南的应用。另外，苹果还指出，应用名称长度不得超过 50 个字符。</p>

<h4>2) <a href="http://www.arinchina.com/news/show-4227.html">苹果新获 59 项专利</a> By Trista</h4>

<p>美国专利商标局正式公布了苹果公司新获批的 59 项专利，包括 12 项设计专利以及可弯曲 OLED 显示屏专利、头戴显示器专利、iOS 设备防震系统专利、家庭自动化系统专利等。</p>

<h2>开发</h2>

<h4>1) <a href="http://www.cnblogs.com/smileEvday/p/iOS_PixelVsPoint.html">iOS 绘制1个像素的线</a> By 枫叶</h4>

<p>第一想法可能是直接根据当前屏幕的 scale 计算出1像素的线对应的 Point，然后设置线宽（或者高）为1个像素。但在设备上测试时会发现渲染出来的线宽并不是1个像素。</p>

<h4>2) <a href="http://limboy.me/tech/2016/07/06/starting-an-app.html">做一个 App 前需要考虑的几件事</a> By 李忠</h4>

<p>随着工具链的完善，语言的升级以及各种优质教程的涌现，做一个 App 的成本也越来越低了。尽管如此，有些事情最好前期就做起来，避免当 App 有了一定规模后，再感慨当初为什么没有多留点心。</p>

<h4>3) <a href="http://www.jianshu.com/p/61a9030adeef">仿微信小视屏</a> By Damonwong</h4>

<p>对于一个类似微信小视屏的功能，大致需要完成的功能无非就是视频录制和视频播放两块。本文是作者视频相关功能开发的实践笔记。</p>

<h2>工具</h2>

<h4>1) <a href="http://www.jianshu.com/p/70ed36cf8a98">Xcode 7 中的调试技巧</a></h4>

<p>Xcode 7 中苹果为我们增加了两个重要的 Debug 相关功能。一个是 Address Sanitizer，另一个是打开 Organizer 窗口的 Crashes 标签页，会自动下载 Crash 信息，右侧的详细信息可以看到是哪行代码导致的崩溃。</p>

<h4>2) <a href="http://blog.imjun.net/2016/08/25/iOS%E7%AC%A6%E5%8F%B7%E8%A1%A8%E6%81%A2%E5%A4%8D-%E9%80%86%E5%90%91%E6%94%AF%E4%BB%98%E5%AE%9D/">iOS 符号表恢复&amp;逆向支付宝</a> By 杨君</h4>

<p>符号表历来是逆向工程中的必争之地，而 iOS 应用在上线前都会裁去符号表，以避免被逆向分析。本文会介绍一个作者写的工具，用于恢复 iOS 应用的符号表。</p>

<h2>其他</h2>

<h4>1) <a href="http://dangrover.com/blog/2016/04/20/bots-wont-replace-apps.html">Better apps will replace apps</a> By Dan Grover</h4>

<p>作者是 Facebook 产品经理，之前在微信工作。他在文中谈了对 Facebook、微软的聊天机器人的理解。</p>

<h4>2) <a href="http://liqi.io/liuyachen/">Surge 开发者使用的软硬件</a></h4>

<p>Surge 的开发者刘亚晨，职业角色是 iOS 自由开发者和技术顾问。这篇访谈中他分享了自己使用的硬件和软件。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第十五期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/08/27/tech-notes-15/"/>
    <updated>2016-08-27T10:34:36+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/08/27/tech-notes-15</id>
    <content type="html"><![CDATA[<p>本期周报主要包括如何将设计稿中的像素转化为开发稿中的约束、类方法与实例方法 Swizzling 的区别，以及 APP 视觉改版高效产出经验分享等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://sspai.com/35297">非国行 iPhone 也可享受保修政策</a></h4>

<p>2016 年 8 月 25 日，Apple 售后接到了一个通知：可以为国内顾客与出游中顾客提供更多国际版 iPhone 的相同产品维修和整机更换服务。</p>

<h2>开发</h2>

<h4>1) <a href="http://blog.callmewhy.com/2016/08/24/autolayout-design-aesthetic/">Auto Layout 设计美学</a> By wanghai</h4>

<p>文章虽然是关于 Auto Layout 的，但是其实最核心的部分是如何将设计稿中的像素转化为开发稿中的约束，而这点在所有开发场合中都是通用的。</p>

<h4>2) <a href="http://www.tanhao.me/code/160723.html/">Method Swizzling 的各种姿势</a> By tanhao</h4>

<p>对于类方法的动态添加，需要将方法添加到 MetaClass 中,因为实例方法记录在 class 的 method-list 中, 类方法是记录在 meta-class 中的 method-list 中的。</p>

<h2>工具</h2>

<h4>1) Mac 小技巧</h4>

<p>局域网 IP 怎么查？Mac 下最快的方法，按住 option 点 Wifi 图标。</p>

<h4>2) <a href="https://wangjwchn.github.io/blog/Display-animated-image-on-iOS-device">Display animated image on iOS device</a> By 王佳玮</h4>

<p>一个用 Swift 实现的 GIF&amp;APNG 引擎，低内存、低 CPU 占用。</p>

<h2>其他</h2>

<h4>1) <a href="https://zi.com/w/a/763ePM?id=763ePM">Rush - 视觉改版回顾和高效产出经验</a> By Tim Wu</h4>

<p>文中建立规范部分提到的规范控件库非常有意义，对于研发来说可以形成控件库。有多少公司的设计师能做到这一点？随心所欲惯了！</p>

<h4>2) <a href="https://github.com/wg689/Solve-App-Store-Review-Problem">Solve App Store Review Problem</a></h4>

<p>罗列了不少审核被拒及应对办法，作者的认真劲儿赞一个！</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第十四期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/08/21/tech-notes-14/"/>
    <updated>2016-08-21T09:20:09+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/08/21/tech-notes-14</id>
    <content type="html"><![CDATA[<p>本期周报主要包括库克任苹果 CEO 五周年专访、iOS 10 Day by Day 系列文章、JSON Web Token 的 Objective-C 库等诸多干货资源。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://www.reuters.com/article/us-apple-china-idUSKCN10R14G">Apple to boost China investments as demand slows</a> By Paul Carsten</h4>

<p>Cook 拜会中国国务院副总理张高丽时宣布苹果将在中国设立研发中心，整合中国的工程及经营团队，显示苹果藉由加码中国市场，试图扭转中国市场的困境。</p>

<h4>2) <a href="http://www.geekpark.net/topics/216414">库克任苹果 CEO 五周年专访</a> By Techsina</h4>

<p>文中包含很多关于价值观、企业国际税等话题。大部分资讯看标题就够了，但强烈建议细细的品读下该专访的全文。</p>

<h2>开发</h2>

<h4>1) <a href="https://www.shinobicontrols.com/blog/ios-10-day-by-day-index">iOS 10 Day by Day</a> By Sam Burnstone</h4>

<p>自 iOS 7 Day by Day 始，就关注 shinobicontrols 上推出的该系列文章。每周一到两篇，对跟进 iOS 10 新特性的开发技术非常有益。</p>

<h4>2) <a href="http://www.jianshu.com/p/f8224779ca63">App 定位和地图的那些坑</a> By hrchen</h4>

<p>开发App时会遇到各种坑，本文分享在iOS/Android系统中定位和地图中遇到的坑，以及携程 App 的解决方案。</p>

<h4>3) <a href="http://itony.me/129.html">iOS 如何放大按钮点击热区</a> By Tony</h4>

<p>我们有时做自定义Button的时候，设计图上的给出按钮尺寸明显偏小，需要放大按钮的点击热区。本文分享的是来自 WWDC 2012 Session 216 的方案。</p>

<h2>工具</h2>

<h4>1) <a href="https://www.decosoftware.com">Deco IDE</a> By decosoftware</h4>

<p>Deco 区别于其他 IDE 最显著的特性是支持常用控件的拖拽生成代码和可视化编辑，这些控件既有 React Native 原生控件，也有一些知名的开源控件。</p>

<h4>2) <a href="https://github.com/yourkarma/JWT">A JSON Web Token implementation in Objective-C</a> By Karma</h4>

<p>JSON Web Token (JWT) is a compact, URL-safe means of representing claims to be transferred between two parties. 在 Objective-C 里如何实现 JWT 可使用 Karma 提供的轮子。</p>

<h2>其他</h2>

<h4>1) <a href="http://www.jianshu.com/p/fad64911a1f6">主流APP图片选择功能对比</a> By 蓝桥</h4>

<p>针对新浪微博、微信、QQ空间等应用的图片处理方式，从拍照、选择图片、完成选择这三个方面归纳移动应用的图片选择上传的最佳产品体验。</p>

<h4>2) <a href="https://www.codementor.io/react-js/tutorial/react-native-vs-ionic">React Native vs Ionic</a> By Frédéric Massart</h4>

<p>近日看到某司某所谓的 Android 架构师在技术选型时写的 RN 与 Weex 对比文章，且不说候选对象用 Weex 而不是诸如 Ionic 等，其文中对 RN 的多处表述也是滑稽的很。从本周开始，在 RN 及 Ionic 上花些时间。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第十三期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/08/14/tech-notes-13/"/>
    <updated>2016-08-14T10:08:14+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/08/14/tech-notes-13</id>
    <content type="html"><![CDATA[<p>本期周报主要包括 Apple 在 Music 及 Heath 领域的两则资讯，WebP 在 iOS 开发中的实践，以及 IPA 瘦身相关的工具介绍等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://www.fastcompany.com/3062124/tim-cooks-apple/apple-musics-bozoma-saint-john-its-about-passion-not-algorithms">Apple Music’s Bozoma Saint John: It’s About Passion, Not Algorithms</a> By Mark Sullivan</h4>

<p>Apple Music 市场总监 Bozoma Saint John 介绍说：与算法相比，Apple Music 更倾向于人工来推荐。</p>

<h4>2) <a href="http://appleinsider.com/articles/16/08/11/apple-hires-flipboard-co-founder-evan-doll-to-direct-work-on-health-software">Apple hires Flipboard co-founder Evan Doll to direct work on health software</a> By Roger Fingas</h4>

<p>相比于 Apple 董事会的大佬抛售股票的资讯，我对 Flipboard 联合创始人 Doll 重回苹果担任 Health Software Engineering 的 Director 这则新闻更感兴趣。因为斯坦福第一期的 iPhone 开发课程中 Doll 是讲师之一，印象深刻。</p>

<h2>开发</h2>

<h4>1) <a href="https://www.raywenderlich.com/133224/how-to-create-an-uber-splash-screen">How To Create an Uber Splash Screen</a> By Derek Selander</h4>

<p>本文介绍了如何基于 CALayer 及 CAAnimation 创建类似 Uber 启动时的动画。如果对动画感兴趣，推荐读一读 iOS Animations by Tutorials 这本书。</p>

<h4>2) <a href="https://kevinmky.github.io/2015/12/17/webP-%E5%9C%A8-iOS-%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/">webP 格式图片在 iOS 中的应用</a> By KevinMkY</h4>

<p>本文从 UIImageView 及 HTML5 页面两方面介绍了如何在 iOS 应用 WebP 格式的图片资源。</p>

<h2>工具</h2>

<h4>1) <a href="http://blog.lessfun.com/blog/2015/09/02/find-unused-resources-in-xcode-project/">查找XCode工程中没被使用的图片资源</a> By lessfun</h4>

<p>随着 APP 版本的迭代，IPA 越来越大，其中很大一部分原因是很多图片（当然可能还有gif等）资源虽然不再被使用，但依旧存在于工程里。本文介绍了现存的各种方案，并提供了一个小程序做相关的清理工作。</p>

<h4>2) <a href="https://github.com/huanxsd/LinkMap">LinkMap解析工具：检查每个类占用大小</a> By Suteki</h4>

<p>若想知道 APP 的可执行文件的具体构成，里面的内容都是些什么，哪些库占用空间较高，可以先利用 Xcode 生成 LinkMap 文件，再导入到 LinkMap 解析工具分析。其中的原理可参考这篇<a href="http://blog.cnbang.net/tech/2296/">iOS APP可执行文件的组成</a>。</p>

<h2>其他</h2>

<h4>1) <a href="http://www.infoq.com/cn/articles/mood-and-efficiency-of-the-technical-team">技术团队的情绪与效率</a> By 申玉宝</h4>

<p>压力不是来自于任务本身，而是任务在大脑中的堵塞，带来的焦虑和心理的抵触。无论你是在团队里的什么位置，这篇文章里的一些观点都是值得去了解的。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第十二期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/08/06/tech-notes-12/"/>
    <updated>2016-08-06T22:03:48+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/08/06/tech-notes-12</id>
    <content type="html"><![CDATA[<p>本期周报主要包括Apple收购机器学习公司、以及Apple Store营收增长等资讯，深入剖析自动释放池、Clang Attributes、POP动画引擎等。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://www.theverge.com/2016/8/5/12390412/apple-turi-acquisition-machine-learning">Apple buys machine learning startup Turi</a> By Jacob Kastrenakes</h4>

<p>Turi的产品可以协助开发者将机器学习以及人工智能技术加入软件，可以预测用户数量变化、情绪分析、欺诈探测、分析用户使用习惯，以及更好的定位潜在用户的系统。</p>

<h4>2) <a href="http://www.macrumors.com/2016/08/03/app-store-50-billion-paid-to-developers/">App Store July Sets Record as Biggest Month Ever</a> By Juli Clover</h4>

<p>App Store七月营收再破纪录，开发者亦获利颇丰。库克表示，单就苹果的服务业务规模来说，明年都可以跻身财富100强。</p>

<h2>开发</h2>

<h4>1) <a href="http://draveness.me/autoreleasepool/">深入解析autoreleasepool</a> By 左书祺</h4>

<p>自动释放池是由AutoreleasePoolPage以双向链表的方式实现的，这篇文章会在源代码层面介绍Objective-C中自动释放池。</p>

<h4>2) <a href="http://blog.sunnyxx.com/2016/05/14/clang-attributes/">Clang Attributes黑魔法小记</a> By 孙源</h4>

<p>Clang Attributes是Clang提供的一种源码注解，方便开发者向编译器表达某种要求，参与控制如 Static Analyzer、Name Mangling、Code Generation等过程。</p>

<h4>3) <a href="https://medium.com/@prianka.kariat/interactive-messages-in-ios-10-4cea542fbd9a">Interactive Messages in iOS 10</a> By Prianka Liz Kariat</h4>

<p>本文介绍了如何使用iOS 10的Message框架开发一个tic tac toe小游戏。</p>

<h2>工具</h2>

<h4>1) <a href="http://adad184.com/2015/03/11/intro-to-pop/">POP介绍与使用实践</a> By adad184</h4>

<p>动画在APP开发过程中，大家多多少少都会接触到。在iOS中动画相关的部分都是基于Core Animation，但文本介绍的是来自于Facebook的动画引擎，以让你快速上手动画。</p>

<h4>2) <a href="http://www.jianshu.com/p/c8152d6ce957">iOS 中 常用的第三方库</a></h4>

<p>类似文章很多，这篇之所以吸引我的眼球，主要在于文中的第三方轮子使用图谱。</p>

<h2>其他</h2>

<h4>1) <a href="http://mp.weixin.qq.com/s?__biz=MjM5NDkxMTgyNw==&amp;mid=2653057579&amp;idx=1&amp;sn=988a719765465746221f356881157a99&amp;scene=4">关于项目重构</a> By loonggg</h4>

<p>读读下面这段对话，你会深有同感的。</p>

<p>A: 重构80%都会失败，因为业务线的需求永远都不会停，资源有限，所以不花大代价，轻易不重构，宁可开发的慢一点，写好。</p>

<p>B: 其实以业界大部分产品经理的水平99%的项目都活不到重构的那天，所以等业务量上来后再重构，会更省资源。</p>

<p>最近经历了两周以『敏捷开发』为名的工厂流水线式的App开发流程，虽然及时退出，但也惹了一身骚。这样下去，该项目的代码难以再维护将是迟早的事情。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第十一期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/07/30/tech-notes-11/"/>
    <updated>2016-07-30T11:19:16+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/07/30/tech-notes-11</id>
    <content type="html"><![CDATA[<p>本期周报主要包括苹果汽车项目的人事动态、Runloop及Runtime等技术剖析、技术管理等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://www.mac52ipod.cn/post/apple-2016-q3-result.php">苹果发布2016财年第三季财报</a> @bmwmengwei</h4>

<p>总结起来就是各种同比下降（除了服务业务），究其原因就是饱和二字。值得注意的是软件和互联网服务业务的营收一直在逆势增长，甚至已经超过电脑、iPad等业务，位居第二大营收来源了。</p>

<h4>2) <a href="http://www.bloomberg.com/news/articles/2016-07-28/apple-taps-blackberry-talent-as-car-project-takes-software-turn">Apple Hires BlackBerry Talent With Car Project Turning to Self-Driving Software</a> @markgurman</h4>

<p>苹果乔布斯时代元老成员Bob Mansfield从退休状态重回苹果岗位担任苹果汽车项目Project Titan掌门人。据彭博消息称，Apple已将黑莓汽车软件部门负责人Dan Dodge招至该项目的管理团队。</p>

<h2>开发</h2>

<h4>1) <a href="http://www.jianshu.com/p/10121d699c32">深入研究 Runloop 与线程保活</a> @张星宇</h4>

<p>在讨论 runloop 相关的文章，以及分析 AFNetworking(2.x) 源码的文章中，我们经常会看到关于利用runloop进行线程保活的分析。</p>

<h4>2) <a href="http://www.jianshu.com/p/3182646001d1">Runtime 10种用法</a> @haojingxue_iOS</h4>

<p>再牛逼的技术和实战结合才有意义，本篇介绍技术尽量和实战联系起来。</p>

<h2>工具</h2>

<h4>1) <a href="https://git-scm.com/book/en/v1/Git-Tools-Stashing">Git之Stashing用法</a></h4>

<p>有时在某分支上开发了一半，需要切到另一个分支处理个紧急的问题，而又不想立即commit代码，此时可以试试git stash这个命令。</p>

<h4>2) <a href="http://useyourloaf.com/blog/xcode-visual-memory-debugger/">Xcode Visual Memory Debugger</a> @kharrison</h4>

<p>本文介绍了Xcode 8引入的全新可视化内存调试工具。</p>

<h2>其他</h2>

<h4>1) <a href="http://amao12580.github.io/post/2016/05/How-to-better-manage-the-technical-team/">如何更好地管理技术团队</a> @amao12580</h4>

<p>技术人员乐于被领导；但他们不喜欢被管理，不喜欢像牛一样被驱赶或指挥。管理者强迫人们服从他们的命令，而领导者则会带领他们一起工作。</p>

<p>管理是客观的，没有个人感情因素，它假定被管理者没有思想和感受，被告知要做什么和该如何做。领导是引领、引导，它激励人们达成目标。</p>

<p>领导力是带有强烈个人感情色彩的，它不是你能命令的，也不是你能测量评估和测试的。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第十期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/07/23/tech-notes-10/"/>
    <updated>2016-07-23T12:19:53+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/07/23/tech-notes-10</id>
    <content type="html"><![CDATA[<p>本期周报主要包括iOS 10相关的交互动画详解、Auto Layout新特性，以及直播应用中的技术经验与架构分析等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="https://www.macstories.net/stories/exploring-the-app-stores-top-grossing-chart/">Exploring the App Store’s Top Grossing Chart</a> by Graham Spencer</h4>

<p>通过对US App Store前200的iPhone应用进行分析，得到的结论是98.5%的APP免费，99%提供IAP，71%提供超过10个IAP，大部分的IAP定价在0.99~19.99美金。按类型来看，68%的是游戏、11%的是社交类应用，音乐类占7%。</p>

<h4>2) <a href="http://mobile.163.com/16/0723/00/BSK9RGNF0011179O.html">带你揭开苹果Fitness Lab的神秘面纱</a> by 网易</h4>

<p>Apple Watch的一个重要功能是健身追踪，这项功能测试的地方之一，就是Fitness Lab秘密实验室。其中一个数据指标是：截止到今天，Fitness Lab一共收集到16000人次的测试结果，总时长达到3万小时。</p>

<h2>开发</h2>

<h4>1) <a href="http://www.jianshu.com/p/6ac70183631e">iOS交互动画详解</a> by seedante</h4>

<p>WWDC 2016 Session 216介绍了iOS 10的新动画 API，让动画与交互无缝连接。</p>

<h4>2) <a href="http://www.jianshu.com/p/2521c610fac3">Xcode 8 Auto Layout新特性</a> by halfrost</h4>

<p>作者是原平安付工程师，一系列关于WWDC 2016 Session的笔记很棒，推荐都看看。</p>

<h4>3) <a href="http://blog.seedlab.io/understanding-responder-chain/">Understanding Responder Chain</a> by seedlab</h4>

<p>本文翻译并梳理了Cocoa Event Handling Guide中的 Responder Chain 部分。</p>

<h4>4) <a href="https://segmentfault.com/a/1190000005994317">揭秘直播移动APP技术实现</a> by fir.im</h4>

<p>2016年直播似乎无处不在，作为一个开发者也许需要补充下关于直播技术点。本文整理了一些开发者对于直播实践项目中的技术经验与直播技术架构分析等内容，还有一些关于 iOS 、Android等相关开发干货。</p>

<h2>工具</h2>

<h4>1) <a href="http://mdsb100-xiabigao.daoapp.io/2016/07/15/ios-cocoapodszu-jian-ping-hua-er-jin-zhi-hua-fang-an-ji-xiang-xi-jiao-cheng/">CocoaPods组件平滑二进制化解决方案</a> by 曹俊</h4>

<p>二进制化指的是通过编译把组件的源码转换成静态库或动态库，以提高该组件在App项目中的编译速度。</p>

<h4>2) <a href="http://mp.weixin.qq.com/s?__biz=MjM5MDE0Mjc4MA==&amp;mid=2650993379&amp;idx=1&amp;sn=69d0fe852fe2774ed1bfe4b9760e69a1">滴滴的组件化实践与优化</a> by 李贤辉</h4>

<p>滴滴iOS技术负责人对组件化实践与优化的分享，包括地图业务模块解耦、界面解耦等内容。</p>

<h2>其他</h2>

<h4>1) <a href="http://uxmovement.com/mobile/how-to-design-a-walkthrough-that-users-will-read/">How to Design a Walkthrough That Users Will Read</a> by anthony</h4>

<p>引用文末一句：引导页应像便签一样简单易读。不过，核心功能大家熟的不能再熟且用户主要就是用其最核心的功能，那我觉得Walkthrough是多余的。比如导航，我的使用频率不高，偶尔在外打开查个路线，猝不及防的看到引导页，很烦的。</p>

<h4>2) <a href="https://zhuanlan.zhihu.com/p/20498277">如何为 app 设计一个合适的搜索功能？</a> by 5key</h4>

<p>我们可以在 apps 中看到各种各样的设计方案，但这些方案并非适合于每一块产品。作者以市面上常见的一些设计形式对搜索功能做一个深入的剖析。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第九期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/07/15/tech-notes-9/"/>
    <updated>2016-07-15T22:59:18+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/07/15/tech-notes-9</id>
    <content type="html"><![CDATA[<p>本期周报主要包括iOS 10体现出的新设计风格、Facebook移动测试实验室解密、如何构建支持多线程的Core Data Stack等。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="https://www.punchkick.com/blog/2016/07/08/apples-design-style-ios-10-accessibility">Apple’s new design style in iOS 10 is a statement on accessibility</a> @Connor Mason</h4>

<p>Anyway，这三大原则，即Clarity、Deference、Depth，让iOS系统有别于其他平台。</p>

<h4>2) <a href="https://code.facebook.com/posts/300815046928882/the-mobile-device-lab-at-the-prineville-data-center/">Facebook lifts the veil on its mobile device testing lab</a> @Antoine Reversat</h4>

<p>Facebook对外揭开了其移动测试实验室的面纱，该实验室当前有60个支架，每个支架上有32只手机，用于iOS测试的支架背后分别连着8台Mini。</p>

<h2>开发</h2>

<h4>1) <a href="https://blog.leancloud.cn/2835/">iOS 性能优化：Instruments 工具的救命三招</a> @LeanCloud</h4>

<p>随着项目的扩大和功能的增多，没经过认真调试和优化的代码，要么任性地卡顿运行，要么低调地崩溃了之。</p>

<h4>2) <a href="https://www.bignerdranch.com/blog/introducing-the-big-nerd-ranch-core-data-stack/#shared_coordinator">Introducing the Core Data Stack</a> @Robert Edwards</h4>

<p>本周花了些时间学习支持多线程的Core Data Stack设计方案，Big Nerd Ranch提的这个模型感觉不错。</p>

<h2>工具</h2>

<h4>1) <a href="https://github.com/TBXark/TKRadarChart">TKRadarChart</a> @TBXark</h4>

<p>Swift 实现的一个类似芝麻分解读页的雷达图。</p>

<h4>2) <a href="https://itunes.apple.com/cn/app/iconkit-icon-resizer-for-app/id507135296">IconKit: The Icon Resizer for App Development</a> @Appersian</h4>

<p>IconKit这款老牌图标快速生成软件支持从 iOS 6 到 iOS 10、watchOS 1-2、CarPlay, Messages 贴纸、Xcode 图标集的图标生成服务。</p>

<h2>其他</h2>

<h4>1) <a href="https://twitter.com/kentzhu/status/753434825978109953">产品语录</a> @kentzhu</h4>

<blockquote><p>很多老板会有一个误区，我的业务上不去是因为产品没做好，产品没做好体现在APP的界面不够高端大气上档次，体现在不能三步点击找到主功能……你一个卖货的不去上街吆喝，怪货架长得不好看有个毛用？</p></blockquote>

<h4>2) <a href="http://weibo.com/1765732340/DENJO10bl?type=comment">软件工程方法语录</a> @钟颖</h4>

<blockquote><p>也许让我对敏捷不舒服的原因是，我真的想看看敏捷教练到底做过什么不得了的项目。</p></blockquote>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第八期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/07/08/tech-notes-8/"/>
    <updated>2016-07-08T21:44:07+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/07/08/tech-notes-8</id>
    <content type="html"><![CDATA[<p>本期周报主要包括苹果开源压缩算法LZFSE、iOS 10中Privacy的变化、iCloud Core Data的境遇等。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="https://www.infoq.com/news/2016/07/apple-lzfse-lossless-opensource">Apple开源新的压缩算法LZFSE</a></h4>

<p>苹果开源了新的无损压缩算法LZFSE，该算法是去年在iOS 9和OS X 10.10中引入的。按照苹果公司的说法，LZFE的压缩增益和ZLib level 5相同，但速度要快2~3倍，能源效率也更高。</p>

<h4>2) <a href="http://useyourloaf.com/blog/privacy-settings-in-ios-10/">iOS 10 Privacy的变化</a></h4>

<p>比如说如果要在iOS 10中使用相机拍照，那么你得先在info.plist中作相应的声明，否则app会crash。</p>

<h2>开发</h2>

<h4>1) <a href="http://blog.csdn.net/chenyufeng1991/article/details/51771728">深拷贝与浅拷贝详解</a></h4>

<p>通过一句话来解释：深拷贝就是内容拷贝，浅拷贝就是指针拷贝。</p>

<h4>2) <a href="http://www.iosxxoo.com/2016/05/18/%E4%B8%BA%E4%BB%80%E4%B9%88Factory%E6%96%B9%E6%B3%95%E8%A6%81%E8%BF%94%E5%9B%9Einstancetype%E8%80%8C%E4%B8%8D%E6%98%AFid/">为什么你需要使用instancetype</a></h4>

<p>不管何时，只要一个class要返回它相同的类实例，使用instancetype都是更加合适的。</p>

<h4>3) <a href="http://mjtsai.com/blog/2016/06/17/the-deprecation-of-icloud-core-data/">The Deprecation of iCloud Core Data</a></h4>

<p>看<a href="https://developer.apple.com/reference/coredata/nspersistentstorecoordinator">NSPersistentStoreCoordinator</a>有一些标记为Deprecated的方法，今年的WWDC上该变化几乎没有被提及。一直以来都没有触碰iCloud相关的API，估计以后也没这个必要了。</p>

<h2>工具</h2>

<h4>1) <a href="https://github.com/Soulghost/SGUserGuide">SGUserGuide</a></h4>

<p>一个用于制作多步骤用户操作引导的框架，基于AOP，对原工程几乎无任何侵入。</p>

<h4>2) <a href="https://unsplash.com">Unsplash</a></h4>

<p>Unsplash 是一个分享免费高质量照片的网站，都是真实的摄影师作品。图片多是风景和静物，用作公众号文章的封面再好不过，比如此文:P</p>

<h2>其他</h2>

<h4>1) <a href="https://news.ycombinator.com/item?id=11991479">Google为什么要把数十亿行代码放到一个库中</a></h4>

<p>单体大型代码库虽然有许多好处，但构建这样一个庞大的单体代码库也有几个方面的问题需要权衡。Git社区强烈建议使用更多更小的代码库，谷歌的Android和Chrome团队就使用Git。</p>

<h4>2) 豆瓣语录</h4>

<blockquote><p>年轻人在大城市超负荷输出价值，同时也在为各种所谓『消费升级』的概念掏着腰包：出门必打车、每周要买花、每周要请家政……等等。『打最累的工，坐最贵的专车，买最新鲜的花，请最好的家政……』#有时候，青春是一种工业原料#</p></blockquote>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第七期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/07/01/tech-notes-7/"/>
    <updated>2016-07-01T14:46:10+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/07/01/tech-notes-7</id>
    <content type="html"><![CDATA[<p>本期周报主要包括试玩iOS 10 SDK时遇到的问题、处理把nil插入到NSDictionary里引起crash问题的方案等。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://www.cac.gov.cn/2016-06/28/c_1119123114.htm">网信办：App须对注册用户真实身份进行认证 不合规将被整改</a></h4>

<p>另外，国家新闻出版广电总局办公厅印发了关于移动游戏出版服务管理的通知。现在，中国区App Store近日发出通告，移动游戏需要通过国家新闻出版广电总局的审批才可发布。在App审核信息部分的备注字段需要输入游戏类App的批准号码和批准日期。</p>

<h4>2) <a href="http://www.recode.net/2016/6/30/12067578/spotify-apple-app-store-rejection">Spotify更新遭拒</a></h4>

<p>Spotify不想和Apple分成，不使用苹果的订阅服务，这下子遇到麻烦了。</p>

<h2>开发</h2>

<h4>1) iOS 10 beta 1 SDK 初体验</h4>

<p>本周我在实践iOS 10的部分新特性时遇到了不少问题，并且报了三个bug给苹果： <br/>
a. CSSearchQuery 没能查出中文 <br/>
b. 把竖屏拍的照片添加到notification中，显示偏转90° <br/>
c. widget移到Today Extension页面顶部，切换展开与收起，视图位置有偏移</p>

<p>另外，在实践Today Extension时遇到tableview的delegate方法未执行的问题，可参考<a href="http://stackoverflow.com/a/28449837">StackOverflow</a>解决。</p>

<h4>2) <a href="http://tech.glowing.com/cn/how-we-made-nsdictionary-nil-safe/">当 NSDictionary 遇见 nil</a></h4>

<p>当把nil插入到NSDictionary里，会引起crash，简单粗暴的解决办法是插入之前加if判断，弊端是代码有bad smell。作者基于Method Swizzle提供了一个全局的处理方案。</p>

<h2>工具</h2>

<h4>1) <a href="https://github.com/cyanzhong/xTextHandler/">xTextHandler</a></h4>

<p>基于 Xcode Source Editor Extension 的插件集，提高 Xcode 文本处理的体验，你可以通过简单的几行代码扩展它。</p>

<h4>2) <a href="http://wereadteam.github.io/2016/05/23/GYBootingProtection/">iOS 启动连续闪退保护方案</a></h4>

<p>这是微信读书团队分享的方案。之前也看到某猫分享的『APP安全模式』，读起来都云山雾绕的，差评。</p>

<h2>其他</h2>

<h4>1) <a href="http://www.jianshu.com/p/61707af65a48">GMTC2016移动技术大会参会感想</a></h4>

<p>没有参加过此类会议，看了链家网移动敏捷之术，感觉还挺不错的。</p>

<h4>2) <a href="https://www.infoq.com/news/2016/03/agileindia-7sins-scrum">Seven Sins of Scrum and other Agile Antipatterns</a></h4>

<blockquote><p>一些事情看上去是好主意，但在使用的时候会产生意想不到的后果。</p></blockquote>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第六期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/06/27/tech-notes-6/"/>
    <updated>2016-06-27T09:57:31+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/06/27/tech-notes-6</id>
    <content type="html"><![CDATA[<p>本期周报主要包括iOS 10中通知相关的变化、Swift中try的用法、颜色与标注稿不一致的问题等。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://www.loopinsight.com/2016/06/23/apple-discontinues-thunderbolt-display/">Apple discontinues Thunderbolt Display</a></h4>

<p>服役五年的 Thunderbolt Display已经正式停产，剩下的存货仍会在Apple线上商店与零售点销售。</p>

<h4>2) <a href="http://fichek.com/blog/wwdc16-notifications/">WWDC16 - New in Notifications</a></h4>

<p>Notification相关的API从UIKit挪到了新的framework，<a href="http://fichek.com/contact/">Filip Radelic</a>对其变化做了很好的总结。</p>

<p>另附一篇介绍Notification的中文文章<a href="http://www.jianshu.com/p/9b720efe3779">iOS 10  推送Notification新特性</a>。</p>

<h2>开发</h2>

<h4>1) <a href="https://ashfurrow.com/blog/uicollectionview-unjustly-maligned/">UICollectionView: Unjustly Maligned</a></h4>

<p>500px首个iPad版本、Artsy都出自本文作者<a href="https://ashfurrow.com/about/">Ash Furrow</a>之手。同时他也是iOS UICollectionView: The Complete Guide一书的作者。</p>

<p>Ash在文中介绍了如何用UICollectionView构建Artsy的页面。</p>

<p>另外有两篇文章不错，建议一读：<a href="https://adoptioncurve.net/archives/2016/06/collection-view-updates-in-ios10/">Collection View Updates in iOS10 Part 1</a>和<a href="https://adoptioncurve.net/archives/2016/06/collection-view-updates-in-ios10-part-2/">Collection View Updates in iOS10 Part 2</a>。</p>

<h4>2) <a href="http://stackoverflow.com/a/32390612">Swift - try, try! &amp; try?的区别</a></h4>

<p>guard let result = try? doSomething() else {}是一个较为常用的代码范式。另外这种范式下若有异常，会被『翻译』成nil，所以不会捕获到具体的出错原因。故适用于只关注成功或失败这一结果的场景。</p>

<h2>工具</h2>

<h4>1) <a href="http://jaykon.github.io/2014/06/17/ioskai-fa-zhong-de-yan-se-wen-ti/">iOS开发中的颜色问题</a></h4>

<p>设计师给的颜色值标注，设置到app里显示不一致？可能和色彩标准不同有关。比如设计师用的是Generic RBG或者Adobe RGB，而程序里是基于sRGB。</p>

<h4>2) <a href="https://github.com/gskbyte/GSKStretchyHeaderView">GSKStretchyHeaderView</a></h4>

<p>类似Twitter个人中心页面的弹性视图。</p>

<h2>其他</h2>

<h4>1) <a href="https://github.com/linkedin/swift-style-guide">Swift Style Guide</a></h4>

<p>据说LinkedIn用Swift重写了自家的app，这是他们的代码规范。</p>

<h4>2) <a href="http://www.ituring.com.cn/book/397">写给大家看的设计书</a></h4>

<blockquote><p>如果要在简单表达和并不专业的设计之间做出选择，你应该选择简单表达。设计技能的逐步提高是从简单表达开始的。</p></blockquote>

<p>iPhone的成功，降低了产品经理（大部分只有抄袭还抄不好的能力）的门槛；APP的泛滥，降低了软件工程师（鱼龙混杂，水货较多）的门槛；iOS 7开始，降低了设计师（大部分也就是个Photoshop熟练工）的门槛。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第五期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/06/23/tech-notes-5/"/>
    <updated>2016-06-23T16:31:43+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/06/23/tech-notes-5</id>
    <content type="html"><![CDATA[<p>本期周报主要包括Xcode扩展、Method Swizzle、Git分支实践等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://daringfireball.net/linked/2016/06/22/ios-10-kernel">iOS 10 内核未加密</a></h4>

<p>苹果发言人称: “The kernel cache doesn’t contain any user info, and by unencrypting it we’re able to optimize the operating system’s performance without compromising security.”</p>

<h4>2) <a href="https://www.raywenderlich.com/135655/whats-new-swift-3">What’s New in Swift 3?</a></h4>

<p>虽然暂时还没必要迁移至Swift 3（下半年还会有改动），但语言的主要变动还是需要了解的。</p>

<h2>开发</h2>

<h4>1) <a href="http://www.russbishop.net/xcode-extensions">Xcode Source Editor Extension</a></h4>

<p>在菜单触发插件，XCSourceEditorCommand 拦截到该消息。我们从 invocation 中拿到 buffer，根据当前行可以获取到需要的数据。我的<a href="https://github.com/balloonsys/PAXcodePlugin">示例</a>是直接增加一行NSLog代码，所以把数据设置回去即可。</p>

<p>该教程不仅教你怎么做，还将可能遇到的问题及可尝试的解决方案写的很明白。我实现了一个打印当前方法名的插件，用以快速插入代码。另外，如果需要中文教程，可参看钟颖的<a href="https://zhuanlan.zhihu.com/p/21374552">文章</a>。</p>

<h4>2) <a href="http://xiongzenghuidegithub.github.io/blog/2016/04/22/runtimeying-yong-fang-zhi-an-niu-lian-xu-dian-ji/">借助Runtime防止按钮连续点击</a></h4>

<p>按钮连续点击的问题解决起来不难，使用Runtime交换SEL即可控制。</p>

<h4>3) <a href="http://www.jianshu.com/p/cabec2786241">UICollectionView的自定义布局</a></h4>

<p>这篇文章不是分享UICollectionView的详细使用教程，而是属于比较高级的使用技巧。</p>

<h2>工具</h2>

<h4>1) <a href="https://simpholders.com">SimPholders</a></h4>

<p>从menu快速访问iOS模拟器里的app目录。</p>

<h4>2) <a href="https://www.sqlitepro.com">SQLPro for SQLite</a></h4>

<p>移动端数据通常使用SQLite存储，若需要方便的管理其中的数据，请不要错过SQLPro for SQLite。另外插一句使用Core Data的经验，不同版本对应的sqlite文件最好本地保存一份。这样哪天需要测试数据迁移会省不少精力。</p>

<h2>其他</h2>

<h4>1) <a href="http://nvie.com/posts/a-successful-git-branching-model/">A successful Git branching model</a></h4>

<p>自从转行做iOS开发以来，一直使用Git做代码版本管理。而Git分支的最佳实践，个人最推崇<a href="http://nvie.com/about/">Vincent Driessen</a>的做法。之所以po这个，是因为昨天运维部宣讲了服务端代码分支的管理方案。</p>

<h4>2) <a href="http://mp.weixin.qq.com/s?__biz=MzA4ODgwNjk1MQ==&amp;mid=2653788317&amp;idx=1&amp;sn=b5ca8129c2ae99b37f1872d1bbe367c4">漫谈 Airbnb 支付的国际化</a></h4>

<blockquote><p>为了让古巴人也可以在 Airbnb 上租房，我们使用了 VaCuba 这种支付方式，其本质就是人工开着游艇、驾着飞机、骑着自行车，将现金像送货那样送到房东的家里。</p></blockquote>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第四期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/06/21/tech-notes-4/"/>
    <updated>2016-06-21T13:13:13+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/06/21/tech-notes-4</id>
    <content type="html"><![CDATA[<p>本期周报主要包括iMessage Extension的开发、Reveal的使用等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://www.augustyniak.me/post/2016/06/wwdc-sessions-watching-guide/">WWDC Videos Watching Guide</a></h4>

<p>另外也可以看一下百度Hi iOS团队写的<a href="http://baiduhidevios.github.io/2016/06/14/WWDC-2016-%E8%A7%82%E5%BD%B1%E6%8C%87%E5%8D%97/">WWDC 2016 观影指南</a>。</p>

<h4>2) <a href="http://www.theverge.com/2016/6/15/11940010/walt-mossberg-apple-wwdc-2016-recap-themes">Apple is still a world of its own</a></h4>

<p>文中提到了an Apple executive匿名回答为何不提供Android版iMessage。一是卖出的设备足够多，已经有足够量级的数据支撑其AI；二是有助于卖出更多苹果设备。</p>

<h2>开发</h2>

<h4>1) <a href="https://developer.apple.com/library/prerelease/content/samplecode/IceCreamBuilder/Introduction/Intro.html">iMessage App开发</a></h4>

<p>上周看<a href="https://twitter.com/jquave">Jason Newell</a>的文章<a href="http://jamesonquave.com/blog/creating-imessage-apps-with-xcode-8-tutorial-part-1/">Creating iMessage Apps on iOS 10 with Swift – Tutorial (Part 1)</a>做过一个iMessage Sticker，让用户发送平安『医食住行玩』这样的GIF动画。</p>

<p>最好的案例非苹果的官方Sample莫属，请点击标题中的链接。</p>

<h4>2) <a href="http://colin1994.github.io/2016/06/17/Call-Directory-Extension-Study/">来电黑名单</a></h4>

<p>iOS 10中引入了CallKit，意味着现在可以通过 Call Directory Extension 来实现电话黑名单功能了。</p>

<h4>3) <a href="http://jamesonquave.com/blog/adding-siri-to-ios-10-apps-in-swift-tutorial/">Intents Extension</a></h4>

<p>把玩SiriKit，更多内容请见该文的<a href="http://jamesonquave.com/blog/sirikit-swift-3-resolutions-sirikit-tutorial-part-2/">下篇</a>。更翔实的<a href="https://developer.apple.com/library/prerelease/content/samplecode/UnicornChat/Introduction/Intro.html#//apple_ref/doc/uid/TP40017332-Intro-DontLinkElementID_2">案例</a>还是看苹果的吧。</p>

<h2>工具</h2>

<h4>1) <a href="http://revealapp.com/blog/reveal-common-tips-cn.html">Reveal常用技巧</a></h4>

<p>通过Xcode中加断点的方式集成Reveal比较惊艳。iOS系统越狱之后使用Reveal查看别人App视图结构的过程可以参考这篇<a href="http://hihilong.com/2015/11/20/ios9-reveal-jailbreak-app/">文章</a>。</p>

<p>另外，听云某位工程师在某版本Reveal的dylib不支持arm时制作支持arm版的<a href="http://blog.tingyun.com/web/article/detail/262">实践</a>（其实那个时间点最新的Reveal完全支持啊！！！）</p>

<h4>2) <a href="https://github.com/noodlewerk/NWPusher">NWPusher</a></h4>

<p>做iOS 消息推送，需要测试推送证书、推送功能是否正常，强烈推荐使用这款小工具。省时、省力，避免和服务端扯皮。</p>

<h2>其他</h2>

<h4>1) <a href="http://azureyu.com/iOSDevRecord.html">iOS独立开发记录</a></h4>

<p>从想法、设计、开发到最终发布，总结个人开发APP的历程。</p>

<h4>2) <a href="http://www.ruanyifeng.com/blog/2016/05/time-management.html">时间管理的七句话</a></h4>

<p>网上有不少转载Facebook内部高效工作PPT指南的文章，配的中文不忍直视。推荐看这篇带注释的精华版。</p>

<blockquote><p>不要同时做多件事，结果可能都没做好，还拖长了工作时间。</p></blockquote>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第三期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/06/18/tech-notes-3/"/>
    <updated>2016-06-18T10:50:14+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/06/18/tech-notes-3</id>
    <content type="html"><![CDATA[<p>本期周报主要包括iOS 10的一些资讯，以及iOS一些常见问题的设计方案等。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="https://onevcat.com/2016/06/ios-10-sdk/">开发者所需要知道的iOS 10 SDK新特性</a></h4>

<p>从应用开发者的角度看，iOS 10中并没有加入太多内容。</p>

<h4>2) <a href="https://onevcat.com/2016/06/ios-10-ats/">关于iOS 10中ATS的问题</a></h4>

<p>从2017年1月1日起，所有的新提交app默认是不允许使用NSAllowsArbitraryLoads来绕过ATS限制的。</p>

<h2>开发</h2>

<h4>1) <a href="http://www.jianshu.com/p/0497afdad36d#">可复用而且高度解耦的用户统计埋点实现</a></h4>

<p>该埋点方案和我上个月做的统计SDK思路比较一致。不同的在于用户点击事件，文中的做法是拦截UIControl的方法，而我倾向于由APP自行埋点。主要原因在于，被hook的范围较广，同时我们点击事件埋点时，有酌情传入参数的额外需求。</p>

<h4>2) <a href="https://segmentfault.com/a/1190000005744865">iOS释放自注销模式设计</a></h4>

<p>作者描述的问题的确是我们开发中的痛点，只不过我对这篇文章理解的还不够，毕竟工程师的层次也是有差异的:P</p>

<h2>工具</h2>

<h4>1) <a href="https://medium.com/swift-and-ios-writing/a-quick-look-at-uiviewpropertyanimator-a107fb9da5b5">iOS 10 UIKit Animations</a></h4>

<p>我倒是对文章作者的开源库<a href="https://github.com/marmelroy/Interpolate">Interpolate</a>更感兴趣，哈哈！</p>

<h4>2) <a href="https://luckymarmot.com/zh-hans/paw">Mac最先进的HTTP客户端</a></h4>

<p>做iOS开发，联调API是件很麻烦的事情，特别是当提供API的是个开发新手。联调阶段我通常选用Paw而不是Postman。</p>

<h2>其他</h2>

<h4>1) <a href="https://developer.apple.com/support/beta-software/install-ios-beta/">iOS beta Software Installation Guide</a></h4>

<p>本周已采用Configuration Profile的方式安装了iOS 10的beta版，比Restore Image的方案更简便。</p>

<h4>2) <a href="http://www.jianshu.com/p/080d109a9984">每个IT人都应该了解的工作观和商业思维</a></h4>

<p>文中整理了来自37signals的两位联合创始人Rework一书的要点，个人特别喜欢这条：</p>

<blockquote><p>工作狂使得真正高效且不崇尚加班的员工感到无所适从，心怀愧疚，士气低落而且跟风加班，根本就不管到底有没有生产力。</p></blockquote>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第二期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/06/15/tech-notes-2/"/>
    <updated>2016-06-15T11:18:44+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/06/15/tech-notes-2</id>
    <content type="html"><![CDATA[<p>本期周报主要包括平安好房APP在模块化架构推进过程中遇到的一些有意思的技术问题，当然也有一点点关于WWDC 16的资讯（开发者版）。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://www.mac52ipod.cn/post/apple-wwdc-2016-event-5-min-briefintroduction.php">WWDC 2016 新系统发布会5分钟无废话版简介</a></h4>

<p>苹果还宣布了一个为 Flash/SSD储存设备优化的新文件系统Apple File System（APFS），希望对我那台老MBP有所帮助（前不久刚自己动手换了SSD）。APFS预计将在2017年发布，暂不会提供它的开源实现。</p>

<p>技术人员的目光不要被各类媒体的无脑小编带偏，至于其他方面的更新，此处不表，冷嘲也好、热讽也罢。</p>

<h4>2) <a href="https://zhuanlan.zhihu.com/p/21354243">关于 WWDC 16 总得说点什么</a></h4>

<p>开发者记录的一些感想，作者曾在QQ音乐团队独立完成Apple Watch端第一个版本，目前在阿里巴巴。</p>

<h2>开发</h2>

<h4>1) <a href="http://stackoverflow.com/questions/22018272/nsinvocation-returns-value-but-makes-app-crash-with-exc-bad-access">NSInvocation returns value but crash the app</a></h4>

<p>在平安好房APP推进模块化架构过程中，对一些曾经使用MRC的代码做了ARC迁移。冷不丁的被NSInvocation调用给坑了一把。</p>

<p>在ARC模式下，getReturnValue：仅仅是从invocation的返回值拷贝到指定的内存地址，如果返回值是一个NSObject对象的话，是没有处理内存管理的。而我们在定义returnValue时使用的是__strong类型的id类型，ARC就会假设该内存块已被retain（实际没有）。当returnValue出了定义域，被释放时，导致crash。</p>

<h4>2) <a href="http://stackoverflow.com/questions/7017281/performselector-may-cause-a-leak-because-its-selector-is-unknown">performSelector may cause a leak because its selector is unknown</a></h4>

<p>依旧是ARC迁移相关。在迁移到ARC之后，编译器给出了一个可能leak的警告。仔细研究后，决定采用SuppressPerformSelectorLeakWarning宏解决。</p>

<h4>3) <a href="https://www.raywenderlich.com/126365/ios-frameworks-tutorial">Creating and Distributing iOS Frameworks</a></h4>

<p>文章介绍了Framework模板的用法，特别是如何在项目中使用新建的Framework，其中的方案在好房统计SDK开发、架构演进过程中均实践过。</p>

<h2>工具</h2>

<h4>1) <a href="http://ayjkdev.top/2016/01/10/cocoapods-questions/">CocoaPods中一些问题的解决</a></h4>

<p>上一期周报提到过，目前不少公司模块化架构采用的CocoaPods方案。在使用CocoaPods的过程中难免遇到各类问题，翻翻这篇文章的总结，相信你会有些收获。</p>

<h4>2) <a href="http://www.schukin.com/achieving-awesomeness-with-local-cocoapods/">Achieving Awesomeness with Local CocoaPods</a></h4>

<p>作者（曾经是Twitter for Apple Watch的负责人）介绍了使用私有Pods的一些思考，有一段话非常赞同：</p>

<blockquote><p>While this approach works great if your Pods are stable, I’ve found that this doesn’t work too well if your Pods are still in active development; keeping them in lockstep with your application code can be a huge pain, particularly on larger teams with multiple feature branches.</p></blockquote>

<h4>3) <a href="http://soledad.me/blog/2015/12/21/octopress-and-el-capitan/">Octopress与El Capitan冲突问题解决方案</a></h4>

<p>近一年没有写blog，近一年没有用Octopress，所以与El Capitan冲突的问题也是上周末才知道。</p>

<p>小结一下：新系统下需要新的依赖库，而这些库需要ruby2.2.3的版本安装。</p>

<h2>其他</h2>

<h4>1) <a href="https://zhuanlan.zhihu.com/p/21350212">注册在开曼的公司，其期权究竟能不能买？</a></h4>

<p>updated on June 19: 当事公司是青云，看其<a href="http://media.weibo.cn/article?id=2309403987980699197994">回应</a>。</p>

<h4>2) 文摘</h4>

<p>人生的困扰大抵来自四个方面：不可避免的死亡，内心深处的孤独感，我们追求的自由以及生活并无显而易见的意义可言。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第一期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/06/12/tech-notes-1/"/>
    <updated>2016-06-12T05:18:37+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/06/12/tech-notes-1</id>
    <content type="html"><![CDATA[<p>每天都会读一些iOS开发相关的技术文章，以及一些移动平台资讯。零散的转发链接不如汇聚成文。作为首期，明确下周报的标准：分享的每篇文章质量需上乘、且必须是自己读过的。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://daringfireball.net/2016/06/the_new_app_store">Phil Schiller: Apple making major changes to the App Store</a></h4>

<p>苹果公司高级副总裁Phil确认50%的APP一天内审核，90%的APP会在两天内审核。所以近期平安好房的版本提交后迅速上线，不是偶然。</p>

<p>不只是期刊类应用可以按订阅收费，所有类型的APP均可以采用这种定价方式。而且，用户订阅一年后，开发者可以得到该用户所付金额的85%哦。</p>

<p>另外一点就是关于搜索广告了，详见链接。顺便插一句，daringfireball网站的博主是自媒体赚钱典范:-)</p>

<h4>2) <a href="http://techcrunch.com/2016/05/26/apple-is-working-rapidly-to-launch-apple-pay-in-more-countries-in-asia-and-europe">VP of Apple Pay: Apple Pay在欧洲及亚洲扩张</a></h4>

<p>说句题外话：Apple Pay在中国上线首日，我就去星巴克（员工熟悉度秒杀其他商户）体验了一把。刷完手机，需要再输入密码（此处的业务逻辑不赘述），手机相当于一张卡（我绑招行信用卡后，分配了个适用于该设备的虚拟卡号，Apple Watch对应另一个不同的虚拟卡号）。</p>

<h2>开发</h2>

<h4>1) <a href="https://www.raywenderlich.com/store/core-data-by-tutorials">Core Data by Tutorials, Second Edition</a></h4>

<p>iOS 9之后，Ray家的教程薄了许多，但质量依旧不赖。如果对Core Data不熟但想学习一下，建议翻看这本Core Data by Tutorials。如果了解一些，但对Core Data的版本化及历史数据迁移不熟，强烈推荐精读第六章Versioning and Migration（作者是Magical Record的作者）。阅读加实践，端午节期间我花了一个下午，很值。</p>

<h4>2) <a href="http://product.hubspot.com/blog/architecting-a-large-ios-app-with-cocoapods">Using CocoaPods to Modularize a Big iOS App</a></h4>

<p>近期看了些对新浪微博、滴滴打车等技术人员的访谈文章，深感基于CocoaPods的模块化架构是比较流行的做法。两年前hubspot分享的这篇文章貌似是源头，他们还提供了实例代码（自己动手找），对理解这一架构思路很有帮助。接下来打算在好房也实践一下，多一点动手、少一些空谈！</p>

<h4>3) <a href="http://www.jianshu.com/p/d684693f1d77">为遗留系统替换数据库</a></h4>

<p>系统级的重构，从来就不是个简单的活儿。好房APP在去年夏天做代码级的重构还引入了两个线上bug。该文作者采用先抽象数据访问层再替换数据库的思路值得借鉴。</p>

<h2>工具</h2>

<h4>1) <a href="https://developer.apple.com/library/ios/technotes/tn2434/_index.html">Minimizing your app’s Memory Footprint</a></h4>

<p>这是苹果近期释出的官方技术文档，教你如何优化APP的内存使用量。</p>

<h4>2) <a href="https://code.facebook.com/posts/583946315094347/automatic-memory-leak-detection-on-ios/">FBMemoryProfiler: Automatic memory leak detection on iOS</a></h4>

<p>这是Facebook一个多月前推出的工具，用于查找内存泄露问题。上周我在平安好房APP集成了下FBMemoryProfiler，但其目前的实用性并不理想。建议看看官方这篇介绍原理的文章。目前那些人云亦云、东抄西摘的技术周报尚无人提及这新潮的“玩具”，本人仅发现途牛网的工程师对此有所关注。</p>

<h2>其他</h2>

<h4>1) <a href="http://www.ui.cn/detail/67329.html">一款APP，从设计稿到切图</a></h4>

<p>如果设计师能把这篇文章好好消化下，且能将一部分付诸行动，项目的推进无疑会更顺畅些。作为首期周报，会穿插一些有价值但可能不是刚过去一周的文章。</p>

<h4>2）<a href="http://www.scrumguides.org/docs/scrumguide/v1/scrum-guide-us.pdf">The Scrum Guide</a></h4>

<p>多少公司、多少领导在扯敏捷开发的大旗？可能很多连软件工程、软件项目管理的门还没摸到呢，推荐看看这份简短的Scrum官方指南。其中有一段话还是很犀利的，好好体会吧。</p>

<blockquote><p>Scrum recognizes no sub-teams in the Development Team, regardless of particular domains
that need to be addressed like testing or business analysis; there are no exceptions to this
rule</p></blockquote>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[这些年读过的iOS开发类图书]]></title>
    <link href="http://balloonsys.github.io/blog/2015/08/02/books-for-ios-programming/"/>
    <updated>2015-08-02T22:18:45+08:00</updated>
    <id>http://balloonsys.github.io/blog/2015/08/02/books-for-ios-programming</id>
    <content type="html"><![CDATA[<p>本文记录一下自2009年夏天接触iOS开发以来读过的书，仅是当时读完后不觉得后悔的那部分。</p>

<!--more-->


<h2>2015年（iOS 9 announced on June 8）</h2>

<h3><a href="http://book.douban.com/subject/26279783/">Programming iOS 8</a></h3>

<p>第二次在Amazon.com海淘技术书籍，一个月都没收到货，联系Amazon.com后他们用DHL重新发货，一周内收到。拿到书吓了一跳，太厚了！！！</p>

<p>作者是个博士，写的东西比较深入。该书还有一本姊妹篇，叫<a href="http://book.douban.com/subject/25929842/">iOS 8 Programming Fundamentals with Swift</a>。上半年我在Mac上挑着看的，已读完Chapter 2、3、4、5、10、11、12、13，对掌握Swift大有裨益。</p>

<p><img src="http://img4.douban.com/lpic/s28069906.jpg" alt="Programming iOS 8" /></p>

<h2>2014年（iOS 8 announced on June 2）</h2>

<h3><a href="http://book.douban.com/subject/26287812/">iOS Programming 4th Edition</a></h3>

<p>这是国外一个比较好的培训机构（BNR）出品的书，质量上乘。入门时若是借助此书，或许基本功可以更扎实些。他们家有一本<a href="http://book.douban.com/subject/19962787/">Objective-C编程</a>，是学习Objective-C的优秀教程，我是在手机上断断续续看完的。</p>

<p>离开前司，英文原版虽未看完，但也不得不归还。后来买了中译本，逐篇读完。其中第24章讲的程序状态恢复，是我之前不曾了解的内容。此书一直拖到2015年年中才读完，略微汗颜。</p>

<p><img src="http://img3.douban.com/lpic/s27970290.jpg" alt="iOS Programming 4th Edition" /></p>

<h2>2013年（iOS 7 announced on June 10）</h2>

<h3><a href="http://book.douban.com/subject/12890783/">iOS 6 Programming Pushing the Limits</a></h3>

<p>在Amazon.cn上买的原版书，该书干货多多，读起来偶尔会有点吃力，但多花点时间非常值得。关于缓存的设计，我直接用在了给绿城物业做的APP中。</p>

<p><img src="http://img3.douban.com/lpic/s24216653.jpg" alt="iOS 6 Programming Pushing the Limits" /></p>

<h2>2012年（iOS 6 announced on June 11）</h2>

<h3><a href="http://book.douban.com/subject/10750982/">iOS 5 By Tutorials</a></h3>

<p>第一次在Amazon.com海淘英文技术书籍。上下两卷，内容丰富，案例详实。但作者众多，个别章节写得不够好，然并不妨碍此书在我心中的地位。其中ARC、Storyboard、UIKit Customization等章节深入仔细的研读过。</p>

<p><img src="http://img3.douban.com/lpic/s9117190.jpg" alt="iOS 5 By Tutorials" /></p>

<h2>2011年（iOS 5 previewed on June 6）</h2>

<h3><a href="http://book.douban.com/subject/6697217/">iOS 4 in Action</a></h3>

<p>这一年的十月份在加州出差，期间在Amazon.com买了这本书（另外还买了本关于Cocos-2d的）。书么，中规中矩，不算差。第一次读英文原版的iOS教程，知识点并没记住太多。</p>

<p><img src="http://img3.douban.com/lpic/s6752591.jpg" alt="iOS 4 in Action" /></p>

<h2>2010年（iOS 4 available on June 21）</h2>

<h3><a href="http://book.douban.com/subject/4886880/">iPhone for Programmers: An App-Driven Approach</a></h3>

<p>这本书中文名叫iPhone应用程序开发名家解析，里面包含了好几个完整的小例子（基于3.x SDK）。这一年，我以某些例子为基础开发了若干自己的APP并发布到App Store（排名还不错哦）。</p>

<p><img src="http://img3.douban.com/lpic/s4529615.jpg" alt="iPhone for Programmers: An App-Driven Approach" /></p>

<h2>2009年（iPhone OS 3.0 available on June 17）</h2>

<h3><a href="http://book.douban.com/subject/3604295/">iPhone开发基础教程</a></h3>

<p>拿到本科学位证书没两个月，买了此书。2009年夏天那会儿，iOS中文资料并不多（下半年此书更新到3.0 SDK）。</p>

<p>作者讲解颇为细致，即使没有Objective-C的基础知识，照着书中的代码练练，很快就上手了。</p>

<p><img src="http://img4.douban.com/lpic/s3664046.jpg" alt="iPhone开发基础教程" /></p>

<h2>后记</h2>

<p>回头等定做的书架到了，把这些书顺序排列。每当瞥过书脊，应有一种好的回味。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Avoid Nested Push Animation]]></title>
    <link href="http://balloonsys.github.io/blog/2015/07/04/avoid-nested-push-animation/"/>
    <updated>2015-07-04T21:28:39+08:00</updated>
    <id>http://balloonsys.github.io/blog/2015/07/04/avoid-nested-push-animation</id>
    <content type="html"><![CDATA[<p>在iOS 8里使用UINavigationController把一个页面Push出来后，很短的时间内再次Push一个页面，并没有太大问题，两个页面相继显示。但在iOS 7里运行会遇到nested push animation can result in corrupted navigation bar问题。</p>

<!--more-->


<h2>模拟项目</h2>

<h3>方法一</h3>

<p>给一个按钮添加点击事件，在事件响应里：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">UIViewController</span> <span class="o">*</span><span class="n">detailPage</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIViewController</span> <span class="n">new</span><span class="p">];</span>
</span><span class='line'><span class="n">UIViewController</span> <span class="o">*</span><span class="n">anotherPage</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIViewController</span> <span class="n">new</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">navigationController</span> <span class="nl">pushViewController:</span><span class="n">detailPage</span> <span class="nl">animated:</span><span class="n">YES</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="n">dispatch_after</span><span class="p">(</span><span class="n">dispatch_time</span><span class="p">(</span><span class="n">DISPATCH_TIME_NOW</span><span class="p">,</span> <span class="mf">0.3</span> <span class="o">*</span> <span class="n">NSEC_PER_SEC</span><span class="p">),</span> <span class="n">dispatch_get_main_queue</span><span class="p">(),</span> <span class="o">^</span><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">navigationController</span> <span class="nl">pushViewController:</span><span class="n">anotherPage</span> <span class="nl">animated:</span><span class="n">YES</span><span class="p">];</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>这样一点击此按钮，便可模拟本文着重讨论的问题。</p>

<h3>方法二</h3>

<p>实际项目里有两个基于View实现的控件，点击时首先缩放一下控件里的图标，然后push一个页面。当点击控件A后，若快速点击控件B，就会发生nested push问题。</p>

<p>方法二中控件带有一定时长的缩放动画，给了用户足够的反应时间去连续点击。而方法一中是基于GCD代码模拟，可精确控制nested push的间隔。示例代码参见<a href="https://github.com/balloonsys/PushVC">PushVC示例之Initial Commit</a></p>

<h2>问题剖析</h2>

<p>首先，从UINavigationController这一层面考虑，在第一个push的动画还没完成，到来的第二个push请求，是否可以忽略？印象中貌似iOS 6就是这么处理的。</p>

<p>然后，我们也可以从UI层面控制，尽量不要在push过程中发起第二次push请求。</p>

<h2>解决方案</h2>

<p>UINavigationController在push过程中，如何忽略其他push请求呢？查看其Delegate，发现其中有如下两个方法：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="nf">navigationController:willShowViewController:animated:</span>
</span><span class='line'><span class="k">-</span> <span class="nf">navigationController:didShowViewController:animated:</span>
</span></code></pre></td></tr></table></div></figure>


<p>所以，我们可以基于UINavigationController建立NavController，增加一个名为inTransition的BOOL属性。将NavController的delegate指向自身，并实现上述两个delegate方法。在willShow中将inTransition置为YES，在didShow中置为NO。接下来重写pushViewController:animated方法：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">pushViewController:</span><span class="p">(</span><span class="n">UIViewController</span> <span class="o">*</span><span class="p">)</span><span class="nv">viewController</span> <span class="nf">animated:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">animated</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">inTransition</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">NSLog</span><span class="p">(</span><span class="err">@“</span><span class="n">Ignore</span> <span class="n">push</span> <span class="n">request</span> <span class="n">when</span> <span class="n">top</span> <span class="n">page</span> <span class="n">is</span> <span class="n">still</span> <span class="n">animating</span><span class="err">”</span><span class="p">);</span>
</span><span class='line'>        <span class="k">return</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">[</span><span class="n">super</span> <span class="nl">pushViewController:</span><span class="n">viewController</span> <span class="nl">animated:</span><span class="n">animated</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>此时运行模拟项目，快速点击两个控件后，控制台会出现“Ignore push request when top page is still animating”消息，说明使用NavController可以像iOS 6的UINavigationController那样成功避免Nested Push问题。</p>

<p>如前分析，我们也可以在UI层做控制，避免在Push过程中发起Push请求。仔细分析一下，第二次Push请求可能在控件的动画过程中发起，也可能在第一次Push过程中发起。所以，控件（示例中是基于View实现的）是否响应事件（示例中是基于tapGesture实现的）需要考虑两个条件。</p>

<h2>前端控制</h2>

<p>如何在动画过程中，避免另一个控件发起Push请求？我们可以在第一个控件的动画过程中，忽略触摸事件即可。核心代码是UIApplication的beginIgnoringInteractionEvents和endIgnoringInteractionEvents方法。主要代码如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">tapped</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">iconView</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">([</span><span class="n">self</span><span class="p">.</span><span class="n">iconView</span><span class="p">.</span><span class="n">layer</span> <span class="nl">animationForKey:</span><span class="n">TAP_ANIMATION_KEY</span><span class="p">]</span> <span class="o">==</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">iconView</span><span class="p">.</span><span class="n">layer</span> <span class="nl">addAnimation:</span><span class="p">[</span><span class="n">self</span> <span class="n">tapAnimation</span><span class="p">]</span> <span class="nl">forKey:</span><span class="n">TAP_ANIMATION_KEY</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>            <span class="p">[[</span><span class="n">UIApplication</span> <span class="n">sharedApplication</span><span class="p">]</span> <span class="n">beginIgnoringInteractionEvents</span><span class="p">];</span>
</span><span class='line'>            <span class="n">self</span><span class="p">.</span><span class="n">inAnimating</span> <span class="o">=</span> <span class="n">YES</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>            <span class="n">NSLog</span><span class="p">(</span><span class="err">@“</span><span class="n">Do</span> <span class="n">NOT</span> <span class="n">tap</span> <span class="n">until</span> <span class="n">animation</span> <span class="k">for</span> <span class="o">%</span><span class="err">@</span> <span class="n">stopped</span><span class="err">”</span><span class="p">,</span> <span class="n">self</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>        <span class="p">[</span><span class="n">super</span> <span class="n">tapped</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">animationDidStop:</span><span class="p">(</span><span class="n">CAAnimation</span> <span class="o">*</span><span class="p">)</span><span class="nv">anim</span> <span class="nf">finished:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">flag</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">[[</span><span class="n">UIApplication</span> <span class="n">sharedApplication</span><span class="p">]</span> <span class="n">endIgnoringInteractionEvents</span><span class="p">];</span>
</span><span class='line'>    <span class="n">self</span><span class="p">.</span><span class="n">inAnimating</span> <span class="o">=</span> <span class="n">NO</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">[</span><span class="n">super</span> <span class="n">tapped</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>当然也可以判断是否有其他控件处于inAnimating状态，以决定是否忽略当前控件的触摸事件（gestureRecognizer:shouldReceiveTouch:）。</p>

<p>如何避免在Push过程中再次发送Push请求呢？我们可以在UIGestureRecognizerDelegate方法（方法名前面刚刚提过）中判断：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">gestureRecognizer:</span><span class="p">(</span><span class="n">UIGestureRecognizer</span> <span class="o">*</span><span class="p">)</span><span class="nv">recogniser</span> <span class="nf">shouldReceiveTouch:</span><span class="p">(</span><span class="n">UITouch</span> <span class="o">*</span><span class="p">)</span><span class="nv">touch</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">([</span><span class="n">self</span><span class="p">.</span><span class="n">navigationController</span> <span class="nl">isKindOfClass:</span><span class="p">[</span><span class="n">NavController</span> <span class="n">class</span><span class="p">]])</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">NavController</span> <span class="o">*</span><span class="n">nav</span> <span class="o">=</span> <span class="p">(</span><span class="n">NavController</span> <span class="o">*</span><span class="p">)</span><span class="n">self</span><span class="p">.</span><span class="n">navigationController</span><span class="p">;</span>
</span><span class='line'>        <span class="k">return</span> <span class="o">!</span><span class="n">nav</span><span class="p">.</span><span class="n">inTransition</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">YES</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>完整的代码可以从Github获得，<a href="https://github.com/balloonsys/PushVC">PushVC之最新commit</a>。</p>

<p><strong>注</strong>：至于如何在不同commit之间切换代码，本文不再赘述。</p>

<h2>参考资料</h2>

<ol>
<li>苹果官方文档：<a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UINavigationControllerDelegate_Protocol/">UINavigationControllerDelegate</a></li>
<li>苹果官方文档：<a href="https://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/multitouch_background/multitouch_background.html">Turn off delivery of touch events for a period</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[关于自定义表视图Cell遇到的一个bug]]></title>
    <link href="http://balloonsys.github.io/blog/2015/03/25/analysis-of-a-bug-in-customized-tableview-cell/"/>
    <updated>2015-03-25T23:02:19+08:00</updated>
    <id>http://balloonsys.github.io/blog/2015/03/25/analysis-of-a-bug-in-customized-tableview-cell</id>
    <content type="html"><![CDATA[<p>今天同事A遇到一个问题：包含一个按钮的TableView Cell，在iOS 6、iOS 8上点击按钮正常工作，但是在iOS 7上却无反应。同事B帮忙review了下代码发现，自定义的Cell在layout时，没有像平常那样调用一下[super layoutSubviews]。</p>

<!--more-->


<p>到这里本来事情也就过去了，但坐在旁边的我听了后，心中仍有几个疙瘩未解。</p>

<h2>iOS 7上点击Cell中的按钮，为何没有响应？</h2>

<h3>剖析问题</h3>

<p>因为没有安装iOS 7模拟器，就在手上的一台装有iOS 7系统的iPad Mini上运行。无法利用Color Blended Layer分析视图，便给Cell嵌套的各个子View分别设置了不同的背景色。最后发现在iPad上，content view只有一小块，目测仅320*44的样子，并没有期望的那么大（在iPhone上也没有覆盖到出状况的那个按钮范围啦）。此时基本可以判断出：<strong>子View在父视图边界之外，对其触摸无法被检测</strong>。但这终究是表面结论，问题的本质是什么呢？</p>

<p>对于iOS设备用户来说，操作设备的方式主要有三种：触摸屏幕、晃动设备、远程控制设备。对应的事件类型有以下三种：<br/>
- 触屏事件（Touch Event）<br/>
- 运动事件（Motion Event）<br/>
- 远端控制事件（Remote-Control Event）</p>

<p>点击按钮属于Touch Event，故接下来重点讨论触摸事件。</p>

<p>当应用发生触摸事件后，系统会将该事件添加至一个由UIApplication单例管理的事件队列。然后UIApplication会把触摸事件发给应用的key window对象，该window对象尝试将事件传递给事件所发生的那个view。这个view就是所谓的hit-test view。寻找hit-test view的过程叫hit-testing。</p>

<p>具体说来，此处table view是window的根视图，因此window首先对table view进行hit-test；显然用户点击范围在table view内，因此pointInside:withEvent:返回了YES，继续检查table view的子视图；为简化问题，假设仅有两个cell，分别称为CellA、CellB，点击范围不在CellA中，因此CellA的pointInside:withEvent返回NO，对应的hitTest:withEvent:返回nil；点击范围“看起来”在CellB中，但是，但是啊，CellB的content view没有期望的那么大，没有“包含”按钮范围，所以pointInside:withEvent：也是返回NO（注意：hitTest:withEvent:会在view的所有子view中递归调用，但在CellB上第一次调用pointInside:withEvent:方法时就返回NO的时候不会也没必要继续在该cell的子视图上递归了）。所以，此处触摸事件的hit-test view是table view，而不是期望的button。</p>

<p>table view（作为first responder）作为此时的hit-test view，但它并没有处理触摸事件，所以事件被传递给table view的next responder，此处为table view所在的controller。如果在controller里，实现了didSelectRow方法，则事件在此被处理掉；否则一直往next responder传递，到了window也处理不了则传递给application（响应链的最后一环）。如果application对象仍然无法处理，则系统会丢弃该事件。</p>

<p>以上通过分析事件的传递及响应，解释了第一个问题，即iOS 7上按钮关联的事件代码为何没有执行。</p>

<h3>解决问题</h3>

<p>方案一，在自定义Cell里重写hitTest:withEvent:方法，轮到检查按钮这个子view时，返回按钮视图。</p>

<p>方案二，既然问题出在content view没有期望的大上，就应该“尽量”让他如期望的那样大，即在cell的layoutSubViews时调用super方法。</p>

<h2>为何iOS 8正常，就iOS 7掉链子？</h2>

<h3>剖析问题</h3>

<p>iOS 6、8上自定义的cell既然能够正常设置content view的大小，说明content view本来是可以自动按照需要去设置自身大小的。毕竟，你在自定义的cell里都没有去特意为content view布局（未调super的layout方法）。</p>

<p>但iOS 7上content view没有自动调整，需要调用table view cell的layoutSubViews方法才行。说明iOS 7里table view cell的layout方法做了特别处理。</p>

<p>为何要特别处理？先大胆的猜测是跟cell的视图结构有关。本来嘛，从6到7时Cell滑动删除的样式都变了。但光猜测是不够的，我们可以一探其cell结构之究竟。</p>

<p>借助View的隐藏方法recursiveDescription，可以打印视图的层次结构。调用该方法时可以给View临时加下方法声明。</p>

<p>最终在iOS 7上我们发现：<strong>cell与contentView之间多了一层UITableViewCellScrollView</strong>。</p>

<p>给这个Scroll View设置背景色，发现它的bounds是期望的大小。可以猜测，不调用super的layout方法时，table view cell的根视图的大小会自动调整好（table view的宽、cell的高），但iOS 7上其根视图是Scroll View，Scroll View的大小调整好了，但是Scroll View的子视图（Content View）的大小需要我们自己保证。</p>

<h3>解决问题</h3>

<p>根据以上分析，该BUG场景下，明显应该采用方案二。</p>

<p>同时获得的教训是，苹果对其基础框架的实现是会有调整的，我们应该按照API的使用习惯来编码，比如调用super的viewDidLoad、layoutSubviews等不能少。否则，客户代码便会因框架代码的调整而受到影响。</p>

<p>再把开头说过的结论小结一遍：<strong>在当前view的bounds之外的触摸不会被接收，即使它是当前view的sub view。当你把当前view的clipToBounds属性设置成false，并且把subView移动到当前view的bounds之外的时候，这种情况就会出现</strong>。</p>

<h2>参考资料</h2>

<ol>
<li>苹果官方文档：<a href="https://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/event_delivery_responder_chain/event_delivery_responder_chain.html#//apple_ref/doc/uid/TP40009541-CH4-SW2">Event Delivery: The Responder Chain</a></li>
<li>网络上的译文：<a href="http://nsdifficult.com/blog/20140314/event/">事件传递之响应链</a></li>
<li>一年前我写过的一篇关于hitTest文章：<a href="http://balloonsys.com/blog/2014/04/08/hit-test-sample/">hitTest示例</a></li>
</ol>

]]></content>
  </entry>
  
</feed>

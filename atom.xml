<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Balloonsys Inc.]]></title>
  <link href="http://balloonsys.github.io/atom.xml" rel="self"/>
  <link href="http://balloonsys.github.io/"/>
  <updated>2017-04-21T16:03:06+08:00</updated>
  <id>http://balloonsys.github.io/</id>
  <author>
    <name><![CDATA[Linkou Bian]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第四十五期）]]></title>
    <link href="http://balloonsys.github.io/blog/2017/04/21/tech-notes-45/"/>
    <updated>2017-04-21T13:46:19+08:00</updated>
    <id>http://balloonsys.github.io/blog/2017/04/21/tech-notes-45</id>
    <content type="html"><![CDATA[<p>本期周报主要包括苹果对微信关闭赞赏的回应、天弘基金移动 App 架构演化、携程无线持续交付平台建设等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://tech.sina.com.cn/mobile/n/n/2017-04-20/doc-ifyepsch1830968.shtml">苹果回应微信关闭赞赏</a> By 新浪科技</h4>

<p>苹果公司这份声明虽然简单但含义明确：赞赏功能并非是苹果逼停的。微信本可以像其他开发者一样，选择App内购方式给公众号运营者；App Store 生态对所有开发者的要求均是一样的。</p>

<h2>开发</h2>

<h4>1) <a href="http://blog.csdn.net/yaoyu/article/details/70184539">天弘基金移动 App 客户端架构优化之路</a> By 姚宇</h4>

<p>天弘·爱理财在前端后端使用的阿里蚂蚁金融云平台。第一个 iOS 版本是在传统的MVC的架构基础上封装了一个网络服务层构建而成。从 2.4 版本开始逐步重构采用 MVVM + 分层架构模式解耦。</p>

<h4>2) <a href="https://skyline75489.github.io/post/2015-8-14_ios_static_dynamic_framework_learning.html">iOS 静态库，动态库与 Framework</a> By Chester Liu</h4>

<p>去年 11 月我总结过在好房移动架构团队做 Framework 开发中的一些经验。本文作者对静态库、动态库、Framework 等基础概念作了介绍。</p>

<h2>工具</h2>

<h4>1) <a href="https://blog.dianqk.org/2017/02/28/use-danger/">Danger</a> By DianQK</h4>

<p>在 Code Review 时，我们可能经常要去检查各种事情，有时我们会忘记，而 Danger 可以友好地完成。其配置非常简单，很容易集成到现有 CI 中。</p>

<h4>2) <a href="http://mp.weixin.qq.com/s/6kf1x0wV1XpH3ycHKCBA7Q">携程无线持续交付平台</a> By 刘李丰</h4>

<p>本文从集成、测试、发布、运营四个子平台来展开分享携程是如何一步步打造无线持续交付平台的。</p>

<h2>其他</h2>

<h4>1) <a href="http://robertheaton.com/2014/03/27/how-does-https-actually-work">How does HTTPS actually work</a> By Rob Heaton</h4>

<p>讲得不算很深的科普文章一篇。看懂后，你就会明白公司下发的标装机多不安全了吧。即使是 HTTPS 请求的内容，也被监控得体无完肤！</p>

<h2>@end</h2>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第四十四期）]]></title>
    <link href="http://balloonsys.github.io/blog/2017/04/15/tech-notes-44/"/>
    <updated>2017-04-15T10:53:56+08:00</updated>
    <id>http://balloonsys.github.io/blog/2017/04/15/tech-notes-44</id>
    <content type="html"><![CDATA[<p>本期周报主要包括 Uber 外卖业务使用 React Native 过程中的权衡、手机 QQ Hybrid 的架构如何优化演进、微软在 RN 基础上推出的跨平台框架等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="https://www.bloomberg.com/amp/news/articles/2017-04-14/apple-gets-dmv-approval-to-test-self-driving-cars-in-california">Apple Said to Near Road Tests of Self-Driving Car Software</a> By Mark Gurman</h4>

<p>苹果已经获得加州的许可，可以在该州测试无人驾驶汽车。</p>

<h2>开发</h2>

<h4>1) <a href="https://eng.uber.com/ubereats-react-native/">Powering UberEATS with React Native</a> By Chris Lewis</h4>

<p>Uber 基于 React Native 技术构建的 Restaurant Dashboard 应用为送餐业务 UberEATS 提供支持。本文介绍了决定使用 React Native，以及确保为餐厅提供可靠、稳健的用户体验过程中所进行的权衡和考虑。</p>

<h4>2) <a href="http://mp.weixin.qq.com/s?__biz=MjM5MDE0Mjc4MA==&amp;mid=2650995689&amp;idx=1&amp;sn=4f77f121345004ae6e18f4b945e46f8e">手机 QQ Hybrid 的架构演进</a> By 涂强</h4>

<p>随着前端开发的兴起，QQ也逐渐演变为Web与原生终端混合的开发模式。QQ 团队除了采用动态 CDN、后台渲染等全栈手段优化体验，也构建了围绕速度、成功率、页面异常等维度的监控体系来保障服务质量。</p>

<h2>工具</h2>

<h4>1) <a href="https://github.com/Microsoft/reactxp">React XP</a> By Microsoft</h4>

<p>微软 Skype 团队开源的跨平台框架, 目前支持 web (React JS), iOS (React Native), Android (React Native) and Windows UWP (React Native) 等平台。</p>

<h4>2) <a href="http://thebugcode.github.io/ios-continous-integration-choosing-a-build-server-and-tooling/">iOS Continous Integration</a> By The Code Bug</h4>

<p>本文对比了 Xcode Server, Jenkins, Travis 以及 fastlane 等多种持续集成工具。</p>

<h2>其他</h2>

<h4>1) <a href="https://hackernoon.com/education-of-a-programmer-aaecf2d35312">Education of a Programmer</a> By Terry Crowley</h4>

<p>作者在微软服役 21 年离职后写就的长文，其中有句话很受欢迎：</p>

<blockquote><p>The deepest learning happens when you struggle with truly hard problems.</p></blockquote>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第四十三期）]]></title>
    <link href="http://balloonsys.github.io/blog/2017/04/07/tech-notes-43/"/>
    <updated>2017-04-07T14:20:58+08:00</updated>
    <id>http://balloonsys.github.io/blog/2017/04/07/tech-notes-43</id>
    <content type="html"><![CDATA[<p>本期周报主要包括 Mac Pro 产品线的最新消息、JavaScriptCore 的方方面面、MVC/MVP/MVVM 架构的思路与优缺点、Instagram 的 React Native 实践等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="https://daringfireball.net/2017/04/the_mac_pro_lives">苹果产品更新</a> By John Gruber</h4>

<p>苹果资深副总裁 Phil Schiller 透露，新 Mac Pro 将采用模块化程度更高、扩展性更强的设计，与之配套的专业显示器也在计划中，明年发布。</p>

<h2>开发</h2>

<h4>1) <a href="http://www.jianshu.com/p/3f5dc8042dfc">深入浅出 JavaScriptCore</a></h4>

<p>本篇文章是作者基于一次组内分享整理而成，包含 Objective-C 与 JavaScript 交互、内存管理、多线程等方面的内容。</p>

<h4>2) <a href="http://www.jianshu.com/p/eedbc820d40a">杂谈: MVC/MVP/MVVM</a></h4>

<p>本文为回答一位朋友关于 MVC/MVP/MVVM 架构方面的疑问所写，旨在介绍 iOS 下这三种架构的设计思路以及各自的优缺点。</p>

<h2>工具</h2>

<h4>1) <a href="https://engineering.instagram.com/react-native-at-instagram-dd828a9a90c7">Instagram 的 React Native 之路</a> By Martin Bigio</h4>

<p>来自 Facebook 的 Instagram 终于来强势支持了一把 React Native。快速迭代、代码复用、减少人力，这么多优点是否值得你去学习甚至在公司项目中引入 React Native 呢？</p>

<h4>2) <a href="https://mp.weixin.qq.com/s/W9jC0W_b7xSWjqfFv7N5Bg">Protocol Buffers</a> By 陶文</h4>

<p>Google 的 Protocol Buffers 在数据编码的效率上似乎被神化了，一直流传性能是 JSON 等本文格式 5 倍以上，本文通过代码测试来比较 JSON 与 PB 具体的性能差别到底是多少。</p>

<h2>其他</h2>

<h4>1) <a href="https://www.raywenderlich.com/158026/introducing-rxswift-reactive-programming-swift">Reactive Programming with Swift</a> By raywenderlich.com</h4>

<p>刚出的一本关于 RxSwift 的技术书籍，Ray 家出品。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第四十二期）]]></title>
    <link href="http://balloonsys.github.io/blog/2017/03/23/tech-notes-42/"/>
    <updated>2017-03-23T08:53:14+08:00</updated>
    <id>http://balloonsys.github.io/blog/2017/03/23/tech-notes-42</id>
    <content type="html"><![CDATA[<p>本期周报主要包括苹果产品更新摘要、基于 CollectionView 实现循环滚动的方案、网易的组件化实践、以及一位小米前员工的财务告白等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) 苹果产品更新</h4>

<p>苹果推出红色 iPhone；iPad Air 2 退休，代之以 A9 芯片的新 9.7 寸 iPad；iPhone SE 和 iPad mini 4 的存储也有变化；还更新了 Apple Watch 表带。</p>

<h2>开发</h2>

<h4>1) <a href="https://adoptioncurve.net/archives/2013/07/building-a-circular-gallery-with-a-uicollectionview/">Building a Infinitely-Scrolling Gallery With a UICollectionView</a> By Tim Duckett</h4>

<p>本文提供了支持广告图的循环滚动方案，如果你没有亲手写过而只是用别人的组件，很可能忽视了其中的玄机。</p>

<h4>2) <a href="http://www.jianshu.com/p/196f66d31543">iOS 组件化实践方案</a> By philon</h4>

<p>网易的 iOS 工程师在参考同行的讨论和之前的 LDBusBundle 方案基础上，提炼出了一个适合中小型应用的 LDBusMediator 中间件。</p>

<h2>工具</h2>

<h4>1) <a href="https://github.com/ink-spot/UPCarouselFlowLayout">UPCarouselFlowLayout</a> By Paul Ulric</h4>

<p>我实现新版二手房首页的轮播图效果，很大程度的参考了作者的布局代码。</p>

<h4>2) <a href="http://tool.lu">在线工具</a></h4>

<p>包含正则表达式测试工具、useragent 分析、时间戳转换&hellip;</p>

<h2>其他</h2>

<h4>1) <a href="http://mp.weixin.qq.com/s/fNZdQxx1C_DF3tw25hEt5Q">一位小米前员工的财务告白</a> By 曲哲</h4>

<p>并不是每个人都有赶上时代与公司风口的洞察力，或者是运气。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第四十一期）]]></title>
    <link href="http://balloonsys.github.io/blog/2017/03/13/tech-notes-41/"/>
    <updated>2017-03-13T09:14:10+08:00</updated>
    <id>http://balloonsys.github.io/blog/2017/03/13/tech-notes-41</id>
    <content type="html"><![CDATA[<p>本期周报主要包括如何高效添加圆角效果，线程同步相关的知识点、问答式掌握 HTTPS 基本概念，以及 iOS App 签名的原理等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="https://www.zdziarski.com/blog/?p=7016#aplo">苹果将知名安全专家 Jonathan Zdziarski 招至麾下</a></h4>

<p>如题。用 Jonathan 自己的话来说，跟一群有共同语言的人一同来捍卫用户隐私是一件关涉到良知的事情。</p>

<h2>开发</h2>

<h4>1) <a href="http://www.jianshu.com/p/f970872fdc22">iOS 高效添加圆角效果</a> By  bestswifter</h4>

<p>设置 masksToBounds 会导致离屏渲染，但 iOS 9 只在设置圆角的视图够多时才反应出性能问题。主要的优化方法是用 Core Graphic API 生成一个 UIImage 再插入到 UIView 的子视图中，对于 UIImageView 则是直接将其 Image 裁剪成圆角。</p>

<h4>2) <a href="http://www.dreamingwish.com/article/the-ios-multithreaded-programming-guide-4-thread-synchronization.html">iOS 线程同步</a> By Dreamingwish</h4>

<p>synchronized 最慢，OSSpinLock 最快。OSpinlock 效率奇高主要原因是，并没有进入系统 kernel，使用它可以节省系统调用和上下文切换，如果临界区的执行时间过长则不建议使用。</p>

<h2>工具</h2>

<h4>1) <a href="http://fullstack.blog/2017/03/12/%E4%B9%9D%E4%B8%AA%E9%97%AE%E9%A2%98%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%86%9F%E6%82%89HTTPS/">九个问题从入门到熟悉 HTTPS</a> By bestswifter</h4>

<p>作者 95 年的，就职于百度。对 HTTPS 的理解程度远超我身边的绝大部分同事。</p>

<h4>2) <a href="https://github.com/buunguyen/octotree">octotree</a> By Buu Nguyen</h4>

<p>平常浏览 Github 时，常常需要在代码目录里切来切去，非常麻烦。安装此浏览器插件后，省时省心。</p>

<h2>其他</h2>

<h4>1) <a href="http://blog.cnbang.net/tech/3386/">iOS App 签名的原理</a> By 陈振焯</h4>

<p>iOS 签名机制挺复杂，各种证书，Provisioning Profile，entitlements，CertificateSigningRequest，p12，AppID，概念一堆，也很容易出错，本文尝试从原理出发，一步步推出为什么会有这么多概念，希望能有助于理解 iOS App 签名的原理和流程。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第四十期）]]></title>
    <link href="http://balloonsys.github.io/blog/2017/03/11/tech-notes-40/"/>
    <updated>2017-03-11T09:46:40+08:00</updated>
    <id>http://balloonsys.github.io/blog/2017/03/11/tech-notes-40</id>
    <content type="html"><![CDATA[<p>本期周报主要包括苹果对 JSPatch / Rollout.io 使用者的警告、基于 HTTP/2 的全新 APNs 协议、IGListKit 使用教程、美团外卖前端团队使用 RN 的实践回顾等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://blog.cnbang.net/internet/3374/">A warning from Apple</a></h4>

<p>苹果给开发者发的一封邮件激起了千层浪，使用 JSPatch 的同学得注意了。还好我给公司设计并开发的 PAHotfix 是去年上线的，否则 KPI 可能要归零。</p>

<h2>开发</h2>

<h4>1) <a href="https://github.com/ChenYilong/iOS9AdaptationTips/blob/master/%E5%9F%BA%E4%BA%8EHTTP2%E7%9A%84%E5%85%A8%E6%96%B0APNs%E5%8D%8F%E8%AE%AE/%E5%9F%BA%E4%BA%8EHTTP2%E7%9A%84%E5%85%A8%E6%96%B0APNs%E5%8D%8F%E8%AE%AE.md">基于 HTTP/2 的全新 APNs 协议</a> By Elon Chan</h4>

<p>其中最大的变化就是基于了 HTTP/2 协议，采用了长连接设计，并提供 HTTP/2 PING 心跳包功能检测、维持当前 APNs 连接，解决了老 APNs 无法维持连接的问题。</p>

<h4>2) <a href="https://www.raywenderlich.com/147162/iglistkit-tutorial-better-uicollectionviews">IGListKit Tutorial: Better UICollectionViews</a> By Ryan Nystrom</h4>

<p>本文介绍了 Instagram 开源的 IGListKit 如何使用。一月份的<a href="http://balloonsys.com/blog/2017/01/13/tech-notes-35/">周报</a>里提到过一篇从 UITableView 迁移到 IGListKit 的文章，不知你看了没有？</p>

<h2>工具</h2>

<h4>1) <a href="https://kiteapp.co">Kite Compositor</a></h4>

<p>一个做动画及原型的工具，有人评价说：犹如 Sketch 遇上 After Effects 遇上 Keynote 呢。</p>

<h2>其他</h2>

<h4>1) <a href="http://mp.weixin.qq.com/s?__biz=MzI1NzYwNjU2Mw==&amp;mid=2247483685&amp;idx=1&amp;sn=6e6109b134cb2421bd688f87605ee361">React Native 一年实践回顾</a> By 大雄</h4>

<p>组内对于 React Native 的实践已经快一年了，我们组主要负责的是美团外卖 M 端的前端业务。本文将总结和回顾一个纯 WEB 前端团队使用 React Native 完成一个应用的整个过程。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第三十九期）]]></title>
    <link href="http://balloonsys.github.io/blog/2017/03/03/tech-notes-39/"/>
    <updated>2017-03-03T11:02:56+08:00</updated>
    <id>http://balloonsys.github.io/blog/2017/03/03/tech-notes-39</id>
    <content type="html"><![CDATA[<p>本期周报主要包括瑞银及凯基证券分析师的预测、iOS 10 nano_free 崩溃问题的解决方案、美团点评前端无痕埋点实践、Twitter 开源的 TIP 图片框架等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://www.businessinsider.com/ubs-apple-1000-engineers-ar-2017-2">瑞银: 苹果有上千名工程师在以色列研发 AR</a> By Hannah Roberts</h4>

<p>据 Business Insider 援引瑞士银行的一份研究报告称，分析师 Steven Milunovich 表示，苹果的下一个重大产品创新将与 AR 技术有关。</p>

<h4>2) <a href="https://www.macx.cn/thread-2198592-1-1.html">凯基证券：今年所有新 iPhone 都支持 Lightning 快充</a> By 郭明池</h4>

<p>根据凯基证券分析师郭明池的预测，苹果今年将要发布的三款 iPhone，包括旗舰级 OLED iPhone 8 仍然都会配备 Lightning 接口。不同的是，苹果今年会为 Lightning 接口加入快速充电功能。</p>

<h2>开发</h2>

<h4>1) <a href="https://mp.weixin.qq.com/s/hnwj24xqrtOhcjEt_TaQ9w">聊聊苹果的 Bug - iOS 10 nano_free Crash</a> By 张三华</h4>

<p>很多开发者在 iOS 10 上遇到了一类堆栈为 nano_free 字样的 Crash，也有很多人向 Bugly 客服反馈遇到了这类问题，但并没有好的解决方案。正当大家都束手无策的时候，微信强大的技术团队针对这类Crash进行了深度研究，并提出了一个解决方案。</p>

<h4>2) <a href="http://tech.meituan.com/mt-mobile-analytics-practice.html">美团点评前端无痕埋点实践</a> By 富强 朝旭 吴凯</h4>

<p>为了解决前端埋点的准确性、及时性、开发效率等问题，业内各家公司从不同角度，提出了多种技术方案。美团在原有代码埋点方案的基础上，演化出了一套轻量的、声明式的前端埋点方案，并且在动态埋点、无痕埋点等方向做了进一步的探索和实践。</p>

<h2>工具</h2>

<h4>1) <a href="https://blog.twitter.com/2017/introducing-twitter-image-pipeline-ios-framework-for-open-source">Twitter Image Pipeline iOS framework</a> By Nolan O'Brien</h4>

<p>Twitter 开源的 TIP 框架用于图片的加载与缓存，据称已内部迭代两年。其 Android 团队采用的是 Facebook 开源的 fresco 框架。</p>

<h2>其他</h2>

<h4>1) <a href="http://blog.cnbang.net/tech/3354/">iOS 开发技术栈与进阶</a> By 陈振焯</h4>

<p>最近有一些开发朋友问我应该怎样提升自己的能力，回想起来做了这么久 iOS 开发，我也有过那种『让我做一个功能实现个需求我会做，但接下来怎样提高我不知道。』的时期，这里尝试列一下 iOS 开发的相关技术，再说说在学习进阶上我的一些想法。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第三十八期）]]></title>
    <link href="http://balloonsys.github.io/blog/2017/02/24/tech-notes-38/"/>
    <updated>2017-02-24T11:44:36+08:00</updated>
    <id>http://balloonsys.github.io/blog/2017/02/24/tech-notes-38</id>
    <content type="html"><![CDATA[<p>本期周报主要包括苹果收购面部识别创业公司、iOS A/B Test 方案探索、去哪儿 React Native 应用实践分享等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://www.timesofisrael.com/apple-buys-israels-facial-recognition-firm-realface-report/">Apple buys Israel’s facial recognition firm RealFace</a> By Shoshanna Solomon</h4>

<p>根据以色列周报的报道，苹果用数百万美金收购了一家以色列的面部识别创业公司 Realface。该公司曾发布过一款名为 Pickeez 的应用，它能帮助用户在多个社交平台中找出用户的最佳照片。</p>

<h2>开发</h2>

<h4>1) <a href="http://www.jianshu.com/p/7b4667cde80b">教你如何从0到1实现组件化架构</a> By 袁峥</h4>

<p>文章罗列的主要是组件化架构中 Cocoapods 如何用，对于组件化的架构设计本身并没有涉及。</p>

<h4>2) <a href="http://blog.flight.dev.qunar.com/2017/01/09/ios-abtest-explore/">iOS A/B Test 方案探索</a> By 李剑飞</h4>

<p>近期团队做了很多 AB Test 的业务需求，在这种需求日益见多的情况下，我们不得不提升我们的代码组织方式，以适应或更好的在此类需求上维护我们的代码。本文主要阐述了业务团队在做 AB Test 的一些想法和思路。</p>

<h2>工具</h2>

<h4>1) Launchpad 页面按住 Option</h4>

<p>这是 macOS 出现删除应用按钮的最快捷方式了吧？</p>

<h4>2) <a href="https://atom.io">Atom</a></h4>

<p>之前一直在用 Sublime，现在逐渐换成 Atom 了。最近在读 BNR 出品的 Front-End Web Development 一书，配置了 emmet / autocomplete-paths / linter 等插件后 Atom 算是把利器。</p>

<h2>其他</h2>

<h4>1) <a href="http://mp.weixin.qq.com/s/ARWJDxSB2wJehxgoydtFQw">Qunar React Native 大规模应用实践</a> By 殷文昭</h4>

<p>Qunar React Native 是去哪儿网基于 React Native 定制的一套框架，让 RN 用起来更方便快捷，2016 年 3 月上线后已在公司内部大规模应用。透过 QRN 的大规模实践我们可以看到如何更好地去使用 RN。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第三十七期）]]></title>
    <link href="http://balloonsys.github.io/blog/2017/02/13/tech-notes-37/"/>
    <updated>2017-02-13T17:22:58+08:00</updated>
    <id>http://balloonsys.github.io/blog/2017/02/13/tech-notes-37</id>
    <content type="html"><![CDATA[<p>本期周报主要包括 App Store 点评功能的新玩法、沃尔玛的 React Native 实践分享、iOS 中 HTTPS 证书验证浅析等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://daringfireball.net/2017/01/new_app_store_review_features">Additional Details on the New App Store Review Features</a> By John Gruber</h4>

<p>iOS 10.3 和 macOS 10.12.4 开始，每个 app 每年只能发三次「求评价」弹窗，用户点评不必离开 app，可以一键关闭所有求点评弹窗，开发者可以直接回复用户的评价。</p>

<h2>开发</h2>

<h4>1) <a href="https://medium.com/walmartlabs/react-native-at-walmartlabs-cdd140589560">沃尔玛的 React Native 实践</a> By Matt Bresnan</h4>

<p>最近，美国零售巨头沃尔玛将它们的官方 App 从 Hybrid 转向了 React Native，获得了非常不错的结果，来看看他们是怎么做的。</p>

<p>PS: Walmart App 背后原来有数百名工程师啊！！！</p>

<h4>2) <a href="https://mp.weixin.qq.com/s/-fLLTtip509K6pNOTkflPQ">iOS 中 HTTPS 证书验证浅析</a> By 李晴</h4>

<p>本文的目的：一是简要分析下对服务器身份验证的完整握手过程，二是证书链的验证，三是探索下 iOS 中原生库 NSURLConnection 或 NSURLSession 如何支持实现 https。</p>

<h2>工具</h2>

<h4>1) <a href="http://www.jianshu.com/p/ad2e37e741bb">细聊 Cocoapods 与 Xcode 工程配置</a> By 张星宇</h4>

<p>对我最有用的信息是：通过 ar -x 解包 .a 文件，再对解出来的 __.SYMDEF SORTED 内容分析发现，其中没有 Category 的目标文件信息，或许这就是静态库中含有 Category 时为何需要专门配置 other linker flag 选项。</p>

<p>作者虽是学生，但思路清晰，很不错的。</p>

<h2>其他</h2>

<h4>1) <a href="https://www.phodal.com/blog/how-to-write-a-resume/">一份优秀的程序员简历是什么样的</a> By 黄峰达</h4>

<p>今年的行情虽然没有去年火热，但是你仍应该拾掇拾掇一下你的简历，万一机会来了呢？</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第三十六期）]]></title>
    <link href="http://balloonsys.github.io/blog/2017/01/20/tech-notes-36/"/>
    <updated>2017-01-20T10:18:04+08:00</updated>
    <id>http://balloonsys.github.io/blog/2017/01/20/tech-notes-36</id>
    <content type="html"><![CDATA[<p>本期周报主要包括 iOS 应用崩溃自动修复、数据统计无埋点技术、仿网易云音乐导航栏的技术实现等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://www.macrumors.com/2017/01/19/new-ipads-second-half-of-2017/">New iPads Might Not Launch Until Sometime in the Second Half of 2017</a> By Mitchel Broussard</h4>

<p>供应链消息称，苹果将会在今年的下半年对外发布、销售三款新平板电脑。新推出的 9.7 英寸将是廉价版本，主要针对教育市场。</p>

<h2>开发</h2>

<h4>1) <a href="https://neyoufan.github.io/2017/01/13/ios/BayMax_HTSafetyGuard/">iOS APP 运行时 Crash 自动修复系统</a> By 陶泽宇</h4>

<p>关于 app 运行时的 crash，我们是不是可以做的更多？是否可以做到实时抓取 app 运行时产生的 crash，然后直接自动修复它，从而不让 app crash 呢？</p>

<h4>2) <a href="http://mp.weixin.qq.com/s?__biz=MzA3ODg4MDk0Ng==&amp;mid=2651112803&amp;idx=1&amp;sn=061e10ff89c15f893511688f9c7864c2">数据统计无埋点技术</a> By 唐星</h4>

<p>本文介绍百分点如何由原来的手动写代码的埋点，发展出不需要写代码的无埋点技术。也介绍了实践中遇到的一些问题和解决方法。</p>

<h2>工具</h2>

<h4>1) <a href="https://github.com/rickytan/RTRootNavigationController">RTRootNavigationController</a> By Ricky Tan</h4>

<p>现在应用的导航栏的颜色不再是单一颜色，还有些需要隐藏 navigationBar 的需求。该项目实现了开发部分提到的网易云音乐导航栏的效果。</p>

<h4>2) <a href="http://microedition.biz/simMagnifier/index.html">simMagnifier</a> By Microedition</h4>

<p>类似于之前推荐过的 SimPholders 工具。除了访问模拟器应用沙盒，还能访问 Core Data 数据文件等。</p>

<h2>其他</h2>

<h4>1) <a href="http://merowing.info/2017/01/seniority/">Seniority</a> By Krzysztof Zabłocki</h4>

<p>资深工程师何以为资深，都需要哪些基本素养？很不错的一篇文章，以作者梳理的各项标准对照自己，提升自己的 Soft Skills，岂不快哉。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第三十五期）]]></title>
    <link href="http://balloonsys.github.io/blog/2017/01/13/tech-notes-35/"/>
    <updated>2017-01-13T09:14:13+08:00</updated>
    <id>http://balloonsys.github.io/blog/2017/01/13/tech-notes-35</id>
    <content type="html"><![CDATA[<p>本期周报主要包括 Swift 项目负责人变更、IGListKit 的应用实践、throttle 释疑、常用 iOS / Mac 软件推荐清单等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="https://lists.swift.org/pipermail/swift-evolution/Week-of-Mon-20170109/030063.html">苹果 Swift 语言创始人离职</a> By Chris Lattner</h4>

<p>Chris Lattner 在邮件里说对 Swift 项目的发展没有影响，自己依旧会是该项目的积极贡献者。</p>

<h2>开发</h2>

<h4>1) <a href="https://medium.com/cocoaacademymag/iglistkit-migrating-an-uitableview-to-iglistkitcollectionview-65a30cf9bac9">Migrating an UITableView to IGListCollectionView</a> By Rodrigo Cavalcante</h4>

<p>本文介绍了如何从 UITableView 迁移到 Instagram 开源的 IGListCollectionView 方案。</p>

<h4>2) <a href="http://mrpeak.cn/blog/ios-throttle/">iOS 编程中 throttle 那些事</a> By MrPeak</h4>

<p>读完此文，你便会理解为何多张图片上传使用多个请求比放在一个请求的好处，你也会理解 AFN 源码中 Request Serializer 设计 throttleBandwidthWithPacketSize:delay: 这个方法的背后考量。</p>

<h4>3) <a href="http://www.jianshu.com/p/c7efbc283480">iOS Crash 问题排名</a></h4>

<p>作者总结了 5 大 crash 问题，解决了这 5 大 crash 问题，基本上你的 app 就相对健壮许多。其余的崩溃问题就需要具体问题具体分析了。</p>

<h2>工具</h2>

<h4>1) <a href="http://balloonsys.com/blog/2017/01/07/my-favourite-apps/">一位 iOS 开发工程师的常用软件</a> By Linkou Bian</h4>

<p>本文罗列了我在 iOS 及 macOS 上常用的约四十个软件。其中很多工具之前都有推荐，此次做了个小结。</p>

<h4>2) <a href="https://kobiton.com">移动云测试平台 Kobiton</a> By Kobiton</h4>

<p>使用 Chrome 试用了下该服务，提供 24 台 Android 设备及 28 台 iOS 设备供测试 APP。测试期间的操作会记录在 Session 日志里，对应时刻的屏幕也可自动截图保存。自动化测试方面支持 Appium 和 Selenium 框架，目前我没有进一步尝试。</p>

<h2>其他</h2>

<h4>1) <a href="https://techcrunch.com/2017/01/08/wtf-is-a-funding-round/">WTF is a funding round?</a> By Katie Roof</h4>

<p>经常在 TechCrunch 上看到某某公司融资数千万、估值几个亿。本文解释了啥是融资、啥是估值、为啥不贷款、N 轮融资是啥意思、巨额融资算是创业成功吗等。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[我常用的软件]]></title>
    <link href="http://balloonsys.github.io/blog/2017/01/07/my-favourite-apps/"/>
    <updated>2017-01-07T23:20:01+08:00</updated>
    <id>http://balloonsys.github.io/blog/2017/01/07/my-favourite-apps</id>
    <content type="html"><![CDATA[<p>本文罗列了我在 iOS 及 macOS 上常用的约四十个软件。</p>

<!--more-->


<h2>iOS</h2>

<h3>1. Tweetbot</h3>

<p>官方客户端其实挺好的，但是广告实在太多太不吸引我（如果像 YouTube 视频广告的水准，我完全可以接受的）。但 Tweetbot 对 RT 的显示效果没有官方的赞。</p>

<h3>2. Moke</h3>

<p>微博官方客户端同样的广告太多太低劣，Moke 的制作水准相当高。</p>

<h3>3. Spotify</h3>

<p>非常棒的音乐播放软件，特别是长按在专辑之间滑动，可以快速预览（准确的说应该是预听）。</p>

<h3>4. Alipay</h3>

<p>同事一起吃饭，互相转账用用；去小店买买东西，也会扫扫二维码支付。</p>

<h3>5. WeChat</h3>

<p>和老婆孩子视频；去小店买买东西，也会扫扫二维码支付。</p>

<h3>6. 商业周刊</h3>

<p>一百来块钱可以看一年专享文章，但是 APP 的制作水准大不如前，推送频率也很讨厌。</p>

<h3>7. Surge</h3>

<p>上网必备工具，用起来确实方便。</p>

<h3>8. Colorful Pro</h3>

<p>天气应用竟然能在 App Store 里独立一栏，一直不大能理解。选择这款应用是因为对下雨的时间段有较为细致的播报。</p>

<h3>9. Next</h3>

<p>记录每天的消费，月底向老婆报账。</p>

<h3>10. YouTube</h3>

<p>自从发现了几个很赞的频道后，YouTube 成了我的主要娱乐平台。</p>

<h3>11. 大众点评</h3>

<p>改版之后，质感的确提升很多。周末叫个外卖啥的，都喜欢用点评。</p>

<h3>12. Kindle</h3>

<p>地铁或者临睡前，这些不适合 Kindle（硬件）的时候可以用 Kindle 这个 APP。缺点是阅读位置同步难得会正确一次。</p>

<h3>13. LinkedIn</h3>

<p>用来查看公司新来的领导是啥背景。</p>

<h3>14. Drafts</h3>

<p>随手记录一些零碎的文字，比如个人理财策略啥的。</p>

<h2>macOS</h2>

<h3>1. Sublime Text</h3>

<p>首选的文本（包括代码）编辑器，用了很多年。</p>

<h3>2. PDFExpert</h3>

<p>之所以在 Mac 上选择 PDF 格式的技术文档来阅读，而不是 ePub 或 azw 之类的，完全是因为 PDFExpert 太棒了。你可以在文档上直接写写画画，做做笔记。</p>

<h3>3. iA Writer</h3>

<p>首先的 MarkDown 编辑器。一直没有买新版，因为足够用了。</p>

<h3>4. ReadKit</h3>

<p>RSS 客户端，配合 Feedly 用起来还是不错的。</p>

<h3>5. iTerm</h3>

<p>我使用的是 ZSH 而不是默认的 BSH，配置和插件管理由 On My Zsh 负责，其中主题是用的 <a href="https://github.com/oskarkrawczyk/honukai-iterm-zsh">Honukai</a>。</p>

<h3>6. Surge</h3>

<p>上网必备工具，用起来确实方便。</p>

<h3>7. SimPholders</h3>

<p>查看模拟器里的 APP 沙盒位置。</p>

<h3>8. SourceTree</h3>

<p>管理 Git 工程。</p>

<h3>9. Dash</h3>

<p>虽然 Dash 的源代码可能没有那么优雅，但这个软件确实提供了方便。至少我打开 API 文档的概率提高了很多。</p>

<h3>10. Evernote</h3>

<p>虽然 Evernote 在走下坡路，但还没有找到合适的替代品。</p>

<h3>11. Spotify</h3>

<p>为了在公司网络下正常使用，我特地写过一篇<a href="http://balloonsys.com/blog/2016/12/27/spotify-proxy-on-mac/">文章</a>。如果想屏蔽广告，可以看看 <a href="https://www.reddit.com/r/Piracy/comments/4kn6rq/comprehensive_guide_to_blocking_ads_on_spotify/">reddit</a> 上的讨论。</p>

<h3>12. Charles</h3>

<p>挂代理，抓包，看 APP 的 API 接口。</p>

<h3>13. Omnigraffle</h3>

<p>画流程图的首选。</p>

<h3>14. Paw</h3>

<p>最好的 API 测试工具。</p>

<h3>15. SQLPro for SQLite</h3>

<p>在 Mac 上查看 SQLite。</p>

<h3>16. Reveal</h3>

<p>Hack 别人的 APP 或者分析 UI 的设计时，不可或缺的利器。</p>

<h3>17. Sequal Pro</h3>

<p>免费的 MySQL 客户端。</p>

<h3>18. Ummy Video Downloader</h3>

<p>当在 YouTube 上看到不错的视频，想下载下来怎么办？使用 Ummy 出的这个小程序即可，就是 20 刀有点贵。</p>

<h3>19. AirServer</h3>

<p>iPhone 镜像到 Mac 端的 AirServer，这样即使没有专门的连接线也可以在投影仪上演示 APP 的功能。</p>

<h3>20. Movist</h3>

<p>支持的视频格式比较全面。</p>

<h3>21. CleanMyMac</h3>

<p>虽然可以直接把软件拖到回收站，但一些相关的配置文件还是残留在系统里的。使用 CleanMyMac 能够干净的清理不必要的文件。</p>

<h3>22. Sketch</h3>

<p>本来是想用 Sketch 作应用设计的，但全职从事 iOS 开发后几乎没有做过个人产品。</p>

<h3>23. Sip</h3>

<p>屏幕颜色吸取器。</p>

<h3>24. The Unarchiver</h3>

<p>免费好用的解压缩软件。</p>

<h3>25. VMware Fusion</h3>

<p>Mac 上使用 Windows 或 CentOS 或 &hellip;</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第三十四期）]]></title>
    <link href="http://balloonsys.github.io/blog/2017/01/06/tech-notes-34/"/>
    <updated>2017-01-06T16:44:39+08:00</updated>
    <id>http://balloonsys.github.io/blog/2017/01/06/tech-notes-34</id>
    <content type="html"><![CDATA[<p>本期周报主要包括苹果 2017 新年大促消息、微信 Mars 之 xlog 使用、APP 引导页的设计、Youtube 视频下载工具、常见算法的分析与实现等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://www.apple.com/cn/shop/gifts/new-year-offer">苹果 2017 新年大促</a></h4>

<p>苹果于 1 月 3 日放出一则清新醒神的优惠大消息：苹果红色星期五正式回归，优惠力度可能是多年来最强的一次。</p>

<h2>开发</h2>

<h4>1) <a href="https://gold.xitu.io/post/586629b861ff4b006ba9daf6">微信 Mars 之 xlog 使用全解析</a> By 徐宜生</h4>

<p>微信开源的通信库 Mars，其中有一个高性能的日志模块 xlog。本篇文章将带领大家将 xlog 模块抽取出来，作为一个单独的模块来使用。</p>

<h4>2) <a href="https://lunapps.com/blog/onboarding-framework-for-ios/">How we built LUNTutorialViewController</a> By LUNAPPS</h4>

<p>LUNTutorialViewController 这个引导页效果在很多 APP 里都能看到身影，本文详细介绍了其设计与实现。</p>

<h2>工具</h2>

<h4>1) <a href="http://videodownloader.ummy.net/mac.html">Ummy Video Downloader</a> By Ummy</h4>

<p>正如官网介绍的那样，The simplest YouTube downloader for Mac，诚不欺也。看到 Youtube 上好看的节目，我还是喜欢下载下来到电视上播放。</p>

<h4>2) <a href="https://chrome.google.com/webstore/detail/tumblr%E8%A7%86%E9%A2%91%E4%B8%8B%E8%BD%BD/njnkdhldbefijmdmjongfghcelgajjli">Tumblr video downloader</a> By unclehking</h4>

<p>这是一个 Chrome 插件，方便下载 Tumblr 上的视频用的。</p>

<h2>其他</h2>

<h4>1) <a href="http://www.geeksforgeeks.org/top-10-algorithms-in-interview-questions/">Top 10 algorithms in Interview Questions</a> By GeeksforGeeks</h4>

<p>针对八类问题分别给出了最常见的十道算法题及其解答，适合年后准备面试的同学。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第三十三期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/12/30/tech-notes-33/"/>
    <updated>2016-12-30T18:09:58+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/12/30/tech-notes-33</id>
    <content type="html"><![CDATA[<p>本期周报主要包括手机 QQ 牛逼的 iOS 动态化方案、拼图验证控件的实现的原理、AFNetworking 3.0 源代码阅读笔记、Xcode 8.2 Simulator 新特性介绍等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://www.theverge.com/2016/12/24/14074654/apple-consumer-reports-macbook-pro-battery-test">Inconsistent MacBook Pro battery test results</a></h4>

<p>全新 MacBook Pro 的续航飘忽不定，经过多次测试发现，MacBook Pro 的续航有时可以达到 10 多个小时，而有时却只有 3 个多小时。苹果全球营销高级副总裁 Phil Schiller 表示，苹果正在与《消费者报告》合作，解决 MacBook Pro 电池飘忽不定的问题。</p>

<h2>开发</h2>

<h4>1) <a href="http://mp.weixin.qq.com/s/DhGR6J5fx04BPi-kMsMBJg">手机 QQ 的 iOS 动态化方案</a> By OCSTeam</h4>

<p>在iOS的发展历程上，涌现了很多动态化方案，有历史悠久的 WaxPatch 动态化方案，有远近闻名的JSPatch动态化方案。文中手机 QQ 团队向大家介绍一款堪称『史上最疯狂』的 iOS 动态化方案。</p>

<h4>2) <a href="http://tutuge.me/2016/12/25/TTGPuzzleVerify/">拼图验证控件的实现</a> By 燕泽堃</h4>

<p>拼图验证控件用以让用户通过水平、垂直，或者直接拖动拼图块，完成拼图图案，达到验证目的。作者来自阿里，对其开发的 TTGPuzzleVerify 控件做了整体设计思路和实现原理的分享。</p>

<h4>3) <a href="http://balloonsys.com/blog/2016/12/27/afnetworking-in-a-nutshell/">AFNetworking 3.0 源码阅读笔记</a> By Linkou Bian</h4>

<p>上周阅读了 AFNetworking 3.0 的源代码，对阅读中遇到的问题进行了些思考，整理成此文。干货 &amp; 原创，值得一读。</p>

<h2>工具</h2>

<h4>1) <a href="https://medium.com/@hollanderbart/new-features-in-xcode-8-2-simulator-fc64a4014a5f">New features in Xcode 8.2 Simulator</a> By Bart den Hollander</h4>

<p>Xcode 8.2 新增了两项新特性，一是 xcrun 命令可以对模拟器截屏及录制，二是可以通过拖拽的方式安装 app 到模拟器。</p>

<h4>2) <a href="http://balloonsys.com/blog/2016/12/27/spotify-proxy-on-mac/">Mac Spotify</a> By Linkou Bian</h4>

<p>Mac 为了无障碍上网，开着 Surge；想用 Spotify 听听歌，却因公司网络而无法登录，怎么办？</p>

<h2>其他</h2>

<h4>1) <a href="http://mp.weixin.qq.com/s/XpjTQd-p9pNpkQich1ZZ_w">中国企业就是这样倒闭的</a></h4>

<p>整天瞎分析个屁! 什么他妈的流程问题、职责问题、界面问题、考核问题，明明就是机构臃肿问题！</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[AFNetworking 3.0 源码阅读笔记]]></title>
    <link href="http://balloonsys.github.io/blog/2016/12/27/afnetworking-in-a-nutshell/"/>
    <updated>2016-12-27T09:36:53+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/12/27/afnetworking-in-a-nutshell</id>
    <content type="html"><![CDATA[<p>上周阅读了 AFNetworking 3.0 的源代码，对阅读中遇到的问题进行了些思考，整理成此文。</p>

<!--more-->


<h2>AFURLSessionManager (核心类)</h2>

<h4>1. AFHTTPSessionManager 和 AFURLSessionManager 的关系？</h4>

<p>前者是后者的子类，封装了和 HTTP Method 相关的接口。核心代码均在后者的实现中，包括 Session 的创建、Session 回调方法的实现、Task 和 Task 委托对象 (AFURLSessionManagerTaskDelegate) 的映射关系等。</p>

<p>值得关注的是 request serializer 是定义在 AFHTTPSessionManager 中的，而 response serializer 是定义在 AFURLSessionManager 中的。</p>

<h4>2. 创建 Session 时指定的 delegate queue 为何设置  maxConcurrentOperationCount 为 1？</h4>

<p>delegate queue 是 session 的回调方法执行时所在的 queue，并不影响 HTTP 请求的并发执行 (由 Session Configuration 的 HTTPMaximumConnectionsPerHost 控制)。查看 Session 的几个 Delegate 方法，我们可以看到，会涉及到对 task 的 delegate 处理（get / remove 等），而 task 和 task 的 delegate 是由 mutable 的字典管理的，处理时需要用到 lock 以支持多线程安全。所以，这个 delegate queue 本质上还是得一个任务一个任务的处理。</p>

<p>前面讨论了为何设置 maxConcurrentOperationCount 为 1，那这样是否影响 APP 的网络层处理效率？其实不会的。在 - (void)URLSession:(NSURLSession <em>)session task:(NSURLSessionTask </em>)task didCompleteWithError:(NSError *)error 的实现里我们可以看到，对 response 的处理 (使用 response serializer) 是放在一个 concurrent queue (见 url_session_manager_processing_queue 方法) 里的。</p>

<h4>3. 为何设计 completion group 和 completion queue 这两个属性？</h4>

<p>纵观 AFN 的内部，我们只看到 AFURLSessionManagerTaskDelegate 的 - (void)URLSession:(NSURLSession <em>)session task:(NSURLSessionTask </em>)task didCompleteWithError:(nullable NSError *)error 方法中把 completion handler 的执行放在 completion group / queue 里，而且如果没有专门指定的话就用私有的默认 group 及 main queue。所以通常应用层的 success / failure block 在主线程调用。</p>

<p>当我们需要在多个 request 均处理完毕这个时间点，执行一些自定义的操作，那就可以给 session manager 指定专门的 completion group / queue 来实现。</p>

<h4>4. 和 AFURLSessionManagerTaskDelegate 中的 URL Session 相关的几个同名方法什么关系？</h4>

<p>Session 的 delegate 是 URL Session Manager，所以 Session 相关的回调都是到 URL Session Manager 的相关方法里。Task Delegate 里的同名方法是由 Manager 里的回调再调用的，可以搜索 delegate URLSession: 查阅。</p>

<h4>5. 实现文件里还定义了辅助类 AFURLSessionManagerTaskDelegate 及 _AFURLSessionTaskSwizzling 各自的作用是什么？</h4>

<p>前者保存了 task 的进度 (upload、download、completion) 相关的处理块。其进度信息是根据 session 委托方法传递过来的数据，计算后保存到 NSProgress 对象里的。</p>

<p>后者是为规避 NSURLSession Task 跟 KVO 相关的一个 bug，将 resume / suspend 方法改写了下。因为 class cluster 的原因，作者创建了一个 NSURLSessionDataTask 对象，使用 while 对其 super 一层层的查找。</p>

<h4>6. _AFURLSessionTaskSwizzling 中的 state 方法有何作用？为何直接 assert(NO, @&ldquo;&hellip;&rdquo;)？</h4>

<p>此处的 state 方法纯粹是为了使用 @selector(state) 以及 [self state] 时能顺利通过编译器的检查。af_resume 中调用的 [self state] 其实是 NSURLSessionDataTask 的 state 方法，_AFURLSessionTaskSwizzling 的 state 方法不会被调用，也不应该调用，所以作者使用了 assert(NO, @&ldquo;&hellip;&rdquo;)。</p>

<h4>7. Session Manager 为何实现 Coding 协议？</h4>

<p>我估计是为了支持 background session，同样值得关注的是 AFURLSessionManager 的初始化方法里调用 session 的 getTasksWithCompletionHandler 方法处理一遍 task delegate（乍一看也是不明所以，但如果是支持 background session，那就有那么点说的通了）。</p>

<h4>8. 创建 task 时为何使用  url_session_manager_create_task_safely 方法再包装一层？</h4>

<p>iOS 8 修复了一个 bug，多线程下创建的 task 小概率拥有同样的 task identifier。但是 AFNetworking 使用 task identifier 和 task delegate 映射，需要 task identifier 唯一。</p>

<p>所以对于早前有这个 bug 的 iOS 版本，使用 dispatch_sync 来同步创建 task 以规避问题。</p>

<h4>9. Session Manager 是否有内存泄露的问题？</h4>

<p>之所以提出这样的问题，是因为 Session Manager 拥有 Session，而 Session 对其 delegate 是强引用，而 Session Manager 就是这个 delegate，于是便 retain cycle 了。</p>

<p>查看苹果的文档得知『If you do not invalidate the session by calling the invalidateAndCancel or finishTasksAndInvalidate method, your app leaks memory until it exits.』</p>

<p>这也是为何 AFN 提供 - (void)invalidateSessionCancelingTasks: 接口。</p>

<h2>AFHTTPSessionManager</h2>

<h4>10. 应用层的 success / failure block 是否需要预防 block 的 retain cycle 问题？</h4>

<p>和 AFNetworking 2.0 里的 URL Connection 方案一致，不需要。以前是在 AFURLConnectionOperation 里通过  [strongSelf setCompletionBlock:nil] 释放对 completion block 的持有。</p>

<p>现在是在 Session Manager 里通过 [self removeDelegateForTask:task] 移除 task delegate 以释放对 completion handler 的持有。</p>

<h4>11. POST 相关接口的差异？</h4>

<p>仅仅 POST 一个普通的字典到服务端使用 data task，若需要 POST 一个文件 (URL / Data) 到服务端则需要使用 multipart form request 及 upload task 实现。后者字典里的普通数据，也是放在请求的 Content-Disposition: form-data; name= XXX 部分，constructing body block 里若 append 文件 (比如图片) 的话是放在 Content-Disposition: form-data; name=&ldquo;XXX&rdquo;; filename=&ldquo;XXX.png&rdquo; 部分 (下一行会指定类型，如 Content-Type: image/png)。</p>

<h4>12. POST 多张图片的 request 如何构造其 body 的？</h4>

<p>body 的构造依赖于 AFStreamingMultipartFormData 对象，待上传的单个图片会被封装到 AFHTTPBodyPart 里，然后 append 到 AFStreamingMultipartFormData → AFMultipartBodyStream → HTTPBodyParts 中。注意 AFMultipartBodyStream 继承自 NSInputStream，可直接设置到 request 中 (见 AFStreamingMultipartFormData → requestByFinalizingMultipartFormData)。</p>

<p>AFMultipartBodyStream 重写了- (NSInteger)read:(uint8_t *)buffer maxLength:(NSUInteger)length 方法，将图片按切片的方式读到 buffer 中。每一个 AFHTTPBodyPart 的构成大致包含 Boundary、Header、Body 等几个子部分，AFHTTPBodyPart 的 read 方法会按这些部分（如果存在）逐个读取出来。</p>

<h2>AFHTTPRequestSerializer</h2>

<h4>13. AFHTTPRequestSerializer 和 AFURLRequestSerialization 之间是什么关系？</h4>

<p>后者是协议，定义了一个将字典数据序列化到 request 中以得到新的 request 这么一个方法。AFHTTPRequestSerializer 实现了这个协议，使用  AFQueryStringFromParameters 方法将字典处理成 key1=value1&amp;key2=value2 这样的形式。</p>

<p>因为字典里可能嵌套包含数组或字典，AFQueryStringPairsFromKeyAndValue 方法使用了递归的思想。虽然这段代码是可以把多层嵌套转成扁平的 KV，我们通常不会嵌套字典，否则服务端无法解析。</p>

<p>除了协议约束的方法之外，AFHTTPRequestSerializer 还实现了对 multipart request 的序列化方法，实现原理见 AFHTTPSessionManager 的第 3 点。</p>

<h2>AFJSONResponseSerializer</h2>

<h4>14. AFJSONResponseSerializer 和 AFURLResponseSerialization 之间是什么关系？</h4>

<p>后者是协议，定义了一个从 response 里解析出 response object 的方法。继承自 AFHTTPResponseSerializer 的 AFJSONResponseSerializer，使用 NSJSONSerialization 完成对 JSON 数据的解析。</p>

<h4>15. AFJSONResponseSerializer 有一个属性叫 removesKeysWithNullValues，有什么用？</h4>

<p>在服务器返回的 json 数据若出现 &ldquo;somevalue&rdquo;:null，会被解析成 NSNull 的对象。我们向这个 NSNull 对象发送消息的时候就会 crash。AFJSONResponseSerializer 提供的这个属性可以控制是否将此类数据过滤掉。</p>

<h2>AFSecurityPolicy</h2>

<h4>16. 定义的三种 SSL Pinning Mode 分别有什么作用？</h4>

<p>AFSSLPinningModeNone：默认值，完全信任服务器，相当于仅支持 HTTP 请求
AFSSLPinningModeCertificate：会比对服务端传过来的证书和 APP 内的证书
AFSSLPinningModePublicKey：仅比较服务端传过来的证书携带的公钥和本地证书里的公钥是否一致</p>

<p>好房 APP 使用的是 AFNetworking 2.x，且将 validatesCertificateChain 置为了 NO，所以好房 APP 并不会严格的比对服务端传过来的证书和 APP 内的证书的内容。之所以这么设置，是因为服务端传来的是个证书链，本地证书只会和其中的一个证书 match，但 AFNetworking 2.x 的实现里要求和服务端证书链里所有的证书都匹配，APP 里不可能放入服务端可能用到的所有证书，所以只好选择不验证证书链。</p>

<p>AFNetworking 3.0 对 AFSSLPinningModeCertificate 的实现有所调整，只要有一个 match 就认为 OK，所以也不再提供 validatesCertificateChain 这个属性了。</p>

<h4>17. 如何选择适合的 Pinning Mode 呢？</h4>

<p>AFSSLPinningModeCertificate 比较安全，他会比对服务端和客户端的证书是否匹配。随 APP 打包的证书是带有效期的。如果只是比较 Public Key，则不会受有效期的影响。个人觉得使用 Public Key 的方案基本足够了。</p>

<h2>AFNetworkReachabilityManager</h2>

<h4>18. 略，主要看看对 IPV 6 的支持。</h4>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Mac Spotify 代理设置]]></title>
    <link href="http://balloonsys.github.io/blog/2016/12/27/spotify-proxy-on-mac/"/>
    <updated>2016-12-27T09:23:52+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/12/27/spotify-proxy-on-mac</id>
    <content type="html"><![CDATA[<p>Mac 为了无障碍上网，开着 Surge；想用 Spotify 听听歌，却因公司网络而无法登录，怎么办？</p>

<!--more-->


<h2>应用内代理设置</h2>

<p>开启 Surge 会自动配置 HTTP / Socket 代理。代理服务器为本机，即 127.0.0.1，端口分别为 6152 / 6153。</p>

<p>打开 Spotify for Mac 打开高级设置项，选择 Socket 5 代理，填写并保存代理服务器信息。</p>

<h2>Facebook 账号登录</h2>

<p>如果依旧无法使用 Facebook 账号登录，请在 /etc/hosts 文件中，将 login.spotilocal.com 映射到 127.0.0.1 即可。也可以在 Spotify Web 设置设备登录密码。</p>

<p>如果还有问题，可以尝试借用手机热点先登录成功。</p>

<h2>代理规则</h2>

<p>有时无法播放，请查看 Spotify 是不是直接连 IP 地址。如果是的话，请在 Surge 规则文件里添加 IP-CIDR 以覆盖对应的 IP 段，终极大法。</p>

<p>Enjoy!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第三十二期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/12/23/tech-notes-32/"/>
    <updated>2016-12-23T09:33:13+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/12/23/tech-notes-32</id>
    <content type="html"><![CDATA[<p>本期周报主要包括 HTTP 缓存机制及 iOS 的实现、Operation Queues 的相关知识、APP 启用 HTTPS 支持的基础知识、滴滴 iOS 动态化方案等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://www.theverge.com/2016/12/21/14037686/apple-macbook-macos-focus-mobile-features-ios">macOS is becoming legacy software</a> By Vlad Savov</h4>

<p>The Verge 引述 Bloomberg 熟悉 Apple 內部运作人士报导，Apple 已经再沒有独立的 Mac OS Team。</p>

<h2>开发</h2>

<h4>1) <a href="http://qnoid.com/2016/04/10/A-primer-in-HTTP-caching-and-its-native-support-by-iOS.html">HTTP 缓存机制及 iOS 的实现</a> By qnoid</h4>

<p>缓存机制的表述，在苹果的文档中都有。但是，判断 response 是否足够 fresh 的介绍是作者的原创。</p>

<h4>2) <a href="http://blog.leichunfeng.com/blog/2015/07/29/ios-concurrency-programming-operation-queues/">iOS 并发编程之 Operation Queues</a> By 雷纯锋</h4>

<p>在 iOS 开发中，我们主要可以通过 Operation Queues、Dispatch Queues 和 Dispatch Sources 来提高应用的并发性。本文主要介绍 Operation Queues 的相关知识。</p>

<p>注：本周精读了 AFNetworking 3.0 源代码，上述两篇文章都是在读代码过程中查阅过的资料。</p>

<h4>3) <a href="https://autolayout.club/2016/12/22/%E5%86%99%E7%BB%99-iOS-%E5%BC%80%E5%8F%91%E8%80%85%E7%9C%8B%E7%9A%84-HTTPS-%E6%8C%87%E5%8D%97/">写给 iOS 开发者看的 HTTPS 指南</a> By 吕文翰</h4>

<p>苹果在 WWDC 2016 上宣布年底将要求所有 APP 适配 ATS，不过本周四又宣布将这个 deadline 推迟了。本文着重介绍 APP 启用 HTTPS 支持的过程中跟 APP 相关的部分，剩余的协议细节将一笔带过。</p>

<h2>工具</h2>

<h4>1) <a href="http://mp.weixin.qq.com/s/qRW_akbU3TSd0SxpF3iQmQ">DynamicCocoa - 滴滴 iOS 动态化方案</a> By 孙源</h4>

<p>DynamicCocoa 可以让现有的 Objective-C 代码转换生成中间代码（JS），下发后动态执行。据说，手机 QQ 的方案是通过 clang 把 OC 代码编译成自己定制的字节码动态下发，然后开发一个虚拟机去执行（惊呆了）。</p>

<h4>2) <a href="http://www.jianshu.com/p/a5c5e9aa5913">XMNetworking</a> By 康祖彬</h4>

<p>XMNetworking 是一个轻量的、简单易用但功能强大的网络库，基于 AFNetworking 3.0 封装。</p>

<h2>其他</h2>

<h4>1) <a href="https://www.facebook.com/notes/mark-zuckerberg/building-jarvis/10154361492931634">扎克伯格写的 Jarvis AI</a> By Zuckerberg</h4>

<p>虽然大部分技术都是现成的（facebook 开源项目和一些自动化家用硬件），但是他整合技术和学习能力实在太恐怖了。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第三十一期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/12/16/tech-notes-31/"/>
    <updated>2016-12-16T18:16:40+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/12/16/tech-notes-31</id>
    <content type="html"><![CDATA[<p>本期周报主要包括 SDWebImage 支持 URL 不变时更新图片内容的方案、HTTP 的构成、Swift 版表单框架、Facebook 首位华人工程师的经验分享等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="http://jingyan.baidu.com/article/dca1fa6f73c875f1a540524e.html">无法安装 macOS Sierra 10.12 更新</a></h4>

<p>本周我尝试将 macOS Sierra 升级到 10.12 时遇到始终无法安装的问题，报验证失败的错。后来参考本文，关闭时间与互联网同步、把系统声音静音、再把任务栏正在运行的软件都退出，之后成功安装。</p>

<h2>开发</h2>

<h4>1) <a href="http://blog.handy.wang/blog/2016/01/29/sdwebimagehuan-cun-zhi-tu-pian-urlbu-bian/">SDWebImage 支持 URL 不变时更新图片内容</a> By Handy.Wang</h4>

<p>文末的第 5 个参考链接技术价值更高，相比而言作者写的文章算『术』。要了解 SDWebImage 的原理，非常推荐读一读其源代码。</p>

<h4>2) <a href="http://mrpeak.cn/blog/http-constitution/">扒一扒 HTTP 的构成</a> By mrpeak</h4>

<p>各平台上的一些第三方库都对 HTTP 做了进一步的封装，让 HTTP 变得更加亲民，但往往拿来就用的技术，很容易忽视其背后隐藏的细节。</p>

<h2>工具</h2>

<h4>1) <a href="https://github.com/xmartlabs/Eureka">Eureka - Elegant form builder in Swift</a> By xmartlabs</h4>

<p>拥有近 5000 个 star 的表单框架，如果需要 Obj-C 版本，可以看看该开发商的 XLForm 项目。</p>

<h4>2) <a href="https://github.com/12207480/DOPDropDownMenu-Enhanced">DOPDropDownMenu 增强版</a></h4>

<p>下拉选择控件在大部分国内应用里都有，作者在 DOPDropDownMenu 的基础上添加了双列表的应用，优化了代码，增强了稳定性。</p>

<h2>其他</h2>

<h4>1) <a href="http://blog.tezign.com/2016/01/09/why-facebook-become-an-empire/">婴儿期的 Facebook 吃了什么才变帝国</a> By 赵海平</h4>

<p>作者是 Facebook 的第一位华人员工，履历牛逼闪闪。他认为在做 startup 的时候，最重要的就是找到你产品的核心价值，而这个核心价值不用到最完美的时刻就应该可以体现出来。</p>

<h4>2) <a href="http://blog.professorbeekums.com/2016/12/what-makes-senior-software-developer.html">怎么判断一个人是不是高级软件工程师</a> By Beekums</h4>

<p>如果你能完全信任一个工程师，他/她办事你放心，那他/她就是高级工程师。</p>

<p>@end</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第三十期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/12/11/tech-notes-30/"/>
    <updated>2016-12-11T10:38:37+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/12/11/tech-notes-30</id>
    <content type="html"><![CDATA[<p>本期周报主要包括 iOS 项目的 HTTPS 迁移实战、基于 CTMediator 的组件化方案、以及给同事 Feedback 的 OFNR 模型等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="https://techcrunch.com/2016/12/05/idc-wearables/">Fitbit’s up and Apple’s down</a> By Brian Heater</h4>

<p>IDC 刚刚发布了全球可穿戴设备市场的最新数据，看起来 Fitbit 势头正旺。在智能手表销量下滑的情况下，可穿戴设备市场的整体规模却出现了增长。</p>

<h2>开发</h2>

<h4>1) <a href="http://www.jianshu.com/p/94f5d3830301">iOS 迁移到 HTTPS</a> By Vincent</h4>

<p>本文介绍了作者自建证书完成 AFNetworking 3.0 单向验证设置、WKWebView 及 SDWebImage 如何设置支持 HTTPS 等内容。</p>

<h4>2) <a href="http://casatwy.com/modulization_in_action.html">基于 CTMediator 的组件化方案</a> By 田伟宇</h4>

<p>作者自称希望这篇文章能够终结业界持续近一年的关于组件化方案的无谓讨论和错误讨论。</p>

<h2>工具</h2>

<h4>1) <a href="https://itunes.apple.com/cn/app/rested-simple-http-requests/id421879749?mt=12">RESTed - Simple HTTP Requests</a> By Patrick Rogers</h4>

<p>Restful API 测试工具首推 Paw 吧，由 @nixzhu 在推特提及的 RESTed 也是简洁好用，而且免费。</p>

<h2>其他</h2>

<h4>1) <a href="http://ramblinjan.com/development/2016/12/05/Your-Hiring-Process-is-your-engineering-process/">Your Hiring Process is Also Your Engineering Process</a> By Jan Jorgensen</h4>

<p>面试是双向的，公司面试求职者、求职者也挑公司。面试流程拖拖拉拉、找来不相干的人做面试官、面试官傲慢无理等，直接反映了这家公司做事的风格。</p>

<h4>2) <a href="http://blog.d3in.org/post/153942984306/negative-feedback-antipatterns">如何给同事批评建议</a> By Charles-Axel Dein</h4>

<p>年底了，大家又得做 Performance Review 了。给同事写好的、表扬形式的 review 是很容易的，但写实质性的批评建议却不容易，怕得罪人。本文给了一些正面例子与反面例子。</p>

<p>给同事 Feedback 的 OFNR 模型：Observation（对方做了啥事）、Feeling（你对这件事的感受）、Need（你觉得怎样才是对的）、Request（对方应怎么改进）。</p>

<h5>@end</h5>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[平安好房iOS开发团队技术周报（第二十九期）]]></title>
    <link href="http://balloonsys.github.io/blog/2016/12/02/tech-notes-29/"/>
    <updated>2016-12-02T09:34:52+08:00</updated>
    <id>http://balloonsys.github.io/blog/2016/12/02/tech-notes-29</id>
    <content type="html"><![CDATA[<p>本期周报主要包括全民 K 歌 RN 的接入实践中分包与加载的方案、安全的处理 JSON 中的空值、A/B 测试里常见的辛普森悖论等内容。</p>

<!--more-->


<h2>资讯</h2>

<h4>1) <a href="https://support.apple.com/zh-cn/HT205928">Apple Music 推出学生优惠</a> By Apple</h4>

<p>如果您就读于颁发学位的大专或大学，您就能以折扣会员价加入 Apple Music，最长可享受 48 个月的优惠。这段时间不需要是连续的。</p>

<h2>开发</h2>

<h4>1) <a href="http://geek.csdn.net/news/detail/122668">全民 K 歌 React Native 最佳实践</a> By 袁聪</h4>

<p>全民 K 歌去年十月份完成了 RN 的接入实践，本文介绍了如何去实践根据业务分包、以及客户端怎么去加载这两方面内容。</p>

<h4>2) <a href="http://honglu.me/2015/04/11/json%E4%B8%AD%E5%A4%B4%E7%96%BC%E7%9A%84null/">json 中头疼的 null</a> By 鸿禄</h4>

<p>在服务器返回 json 数据的时候，时常会出现值为 null 的键值对。json 解析的时候，就会把这个 null 解析成 NSNull 的对象，我们向这个 NSNull 对象发送消息的时候就会遇到 crash 的问题。本文介绍了应对之策。</p>

<h2>工具</h2>

<h4>1) <a href="https://github.com/joeldev/JLRoutes">JLRoutes</a> By Joel Levin</h4>

<p>本周看了 JLRoutes 的源代码，拿来做 APP 的 URL 路由非常不错。不经意间会发现有些代码段就是插入排序算法。</p>

<h2>其他</h2>

<h4>1) <a href="http://www.appadhoc.com/blog/simpson-paradox-in-abtesting/">浅谈 A/B 测试里常见的辛普森悖论</a> By appadhoc</h4>

<p>辛普森悖论 (Simpson’s Paradox) 是英国统计学家 E.H.Simpson 于 1951 年提出的悖论。即在某个条件下的两组数据，在分别讨论时都会满足某种性质，可是一旦合并起来进行考虑，却可能导致相反的结论。</p>

<h4>2) <a href="https://medium.com/swlh/building-and-motivating-engineering-teams-24fd56910039">拉扯一支士气高昂的工程团队</a> By Camille Fournier</h4>

<p>三个要素：Money，别玩虚的，给足工资，正常人都爱钱；Purpose，让工程师一起做产品决策；Respect，像对待成年人一样对待工程师，尊敬他们，把他们当合伙人，而不是把他们当小孩、哄他们开心、让他们听话。</p>

<p>@end</p>
]]></content>
  </entry>
  
</feed>
